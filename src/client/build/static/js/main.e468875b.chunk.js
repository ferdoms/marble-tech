(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,n){e.exports=n(583)},215:function(e,t,n){},216:function(e,t,n){},220:function(e,t){},222:function(e,t){},258:function(e,t){},259:function(e,t){},384:function(e,t,n){},570:function(e,t,n){},571:function(e,t,n){},583:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(33),o=n.n(s);n(215),n(216),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(23),i=n(3),c=n(4),u=n(10),m=n(9),d=n(11),p=n(55),h=n(95),f=n.n(h),y=n(205),g=n.n(y),b=(n(200),"reddit_clone_token");function E(){return!!v()}function v(){return localStorage.getItem(b)}var w=n(64),j=n.n(w),I=n(39),O=n.n(I),A=n(53),S=n(45),x=n.n(S),C=n(63);function R(e){return k.apply(this,arguments)}function k(){return(k=Object(C.a)(x.a.mark(function e(t){var n,r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,t.json();case 6:return n=e.sent,e.t0=console,e.next=10,t;case 10:throw e.t1=e.sent,e.t0.log.call(e.t0,e.t1),(r=new Error(n.Error)).message=n.Error,r;case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var N=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n={};return t["Content-Type"]||(n={Accept:"application/json","Content-Type":"application/json"}),E()&&(n["x-auth-token"]=v()),fetch(e,Object(A.a)({},t,{headers:n})).then(R).then(function(e){return e.json()})})}]),e}(),T=new N,_=function(){function e(t){Object(i.a)(this,e),this.domain=void 0,this.domain=t||"https://marble-tech-staging.herokuapp.com/api/v1/auth/login"}return Object(c.a)(e,[{key:"login",value:function(e,t){return T.fetch(this.domain,{method:"POST",body:JSON.stringify({email:e,password:t})}).then(function(e){var t;return t=e.token,localStorage.setItem(b,t),e})}},{key:"logout",value:function(){localStorage.removeItem(b)}}]),e}(),U=new _,P=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_logout",value:function(){U.logout()}},{key:"render",value:function(){return a.a.createElement(f.a,{className:"",id:"userMenu"},a.a.createElement(j.a,{title:"",id:"basic-nav-dropdown",className:"d-flex flex-row-reverse"},a.a.createElement(j.a.Item,null,"Profile"),a.a.createElement(j.a.Item,null,"Another action"),a.a.createElement(j.a.Item,null,"Something"),a.a.createElement(j.a.Divider,null),a.a.createElement(j.a.Item,null,a.a.createElement(l.b,{to:"/",onClick:this._logout},"Logout"))),a.a.createElement(O.a,{src:"/images/profileImage.svg",width:50,height:50,roundedCircle:!0}))}}]),t}(a.a.Component),q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={isLogged:E()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_renderNavItems",value:function(e){return E()?e.filter(function(e){return!0!==e.onlyGuest}).map(function(e,t){return a.a.createElement(l.b,{className:"nav-link",to:e.href,key:t},e.title)}):e.map(function(e,t){return a.a.createElement(l.b,{className:"nav-link",to:e.href,key:t},e.title)})}},{key:"_renderUserPanel",value:function(){return E()?a.a.createElement(P,null):a.a.createElement("div",null)}},{key:"render",value:function(){return a.a.createElement(g.a,{bg:"dark",variant:"dark",className:"sticky-top bg-winter"},a.a.createElement(l.b,{className:"",to:"/"},a.a.createElement("img",{src:"/images/logo2.png",width:"125",height:"50",className:"d-inline-block align-top",alt:"React Bootstrap logo"})),a.a.createElement(f.a,{className:"ml-auto"},this._renderNavItems(this.props.items)),this._renderUserPanel())}}]),t}(a.a.Component),D=n(20),L=n.n(D),B=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(L.a,{fluid:!0,className:"bg-secondary",style:{minHeight:"200px"}})}}]),t}(a.a.Component),M=n(29),F=n.n(M),G=n(584),W=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={markdown:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(L.a,{className:this.props.className?this.props.className:"",fluid:!0},a.a.createElement(F.a,{className:"px-4"},a.a.createElement(G.a,null,this.props.children)))}}]),t}(a.a.Component),$=n(58),V=n(21),H=n(14),z=n.n(H),J=n(61),K=n.n(J),Q=n(2),Y=n.n(Q),X=n(34);var Z=new _,ee=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",error:null,touched:{email:!1,password:!1}},n._onChange=n._onChange.bind(Object(V.a)(Object(V.a)(n))),n._handleSubmit=n._handleSubmit.bind(Object(V.a)(Object(V.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_onChange",value:function(e){var t;this.setState(Object(A.a)({},this.state,(t={},Object($.a)(t,e.target.id,e.target.value),Object($.a)(t,"error",null),t)))}},{key:"_handleBlur",value:function(e){this.setState({touched:Object(A.a)({},this.state.touched,Object($.a)({},e,!0))})}},{key:"_renderValidationErrors",value:function(){var e=function(e){var t=X.object({email:X.string().email().required().label("Email"),password:X.string().min(6).max(12).required().label("Password")}).options({stripUnknown:!0});return X.validate(e,t)}({email:this.state.email,password:this.state.password});return e.error&&(this.state.touched.email||this.state.touched.email)?a.a.createElement("div",{className:"text-center",style:{width:"100%",marginTop:"0.25rem",fontSize:"80%",color:"#dc3545"}},e.error.details.map(function(e,t){return a.a.createElement("div",{key:t},e.message)})):a.a.createElement("div",null)}},{key:"_renderServerErrors",value:function(){return this.state.error?a.a.createElement("div",{className:"text-center",style:{width:"100%",marginTop:"0.25rem",fontSize:"80%",color:"#dc3545"}},this.state.error):a.a.createElement("div",null)}},{key:"_handleSubmit",value:function(){var e=this;Object(C.a)(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Z.login(e.state.email,e.state.password).then(function(t){e.setState({error:null}),e.props.history.push("/challenges/1")}).catch(function(t){console.log(t),e.setState({error:t.message})});case 1:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;return a.a.createElement(F.a,{className:"align-items-center h-100 pr-4"},a.a.createElement(Y.a,null,a.a.createElement("h1",null,"Sign in"),a.a.createElement(z.a,{className:"my-3"},a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{onBlur:function(){return e._handleBlur("email")},type:"email",id:"email",placeholder:"name@example.com",value:this.state.email,onChange:this._onChange})),a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{onBlur:function(){return e._handleBlur("email")},type:"PASSWORD",id:"password",value:this.state.password,onChange:this._onChange})),this._renderServerErrors(),this._renderValidationErrors(),a.a.createElement(K.a,{style:{width:"155px"},type:"button",onClick:this._handleSubmit},"SING IN"),a.a.createElement("h6",{className:"mt-5 text-center"},"Don't have an account? ",a.a.createElement(l.b,{to:"/register"},"Register here")))))}}]),t}(a.a.Component),te=new N,ne=new(function(){function e(t){Object(i.a)(this,e),this.domain=void 0,this.domain=t||"https://marble-tech-staging.herokuapp.com/api/v1/users"}return Object(c.a)(e,[{key:"getAll",value:function(){return te.fetch(this.domain,{method:"GET"}).then(function(e){return e})}},{key:"get",value:function(e){return te.fetch(this.domain+"/"+e,{method:"GET"}).then(function(e){return e})}},{key:"create",value:function(e){return te.fetch(this.domain,{method:"POST",body:JSON.stringify(e)}).then(function(e){return e})}},{key:"update",value:function(e,t){return te.fetch(this.domain+"/"+e,{method:"PATCH",body:JSON.stringify(t)}).then(function(e){return e})}},{key:"delete",value:function(e){return te.fetch(this.domain+"/"+e,{method:"DELETE"}).then(function(e){return e})}}]),e}()),re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",f_name:"",l_name:"",confirmPassword:"",isRegistered:!1,validated:!1,err_form:null,err:{f_name:null,l_name:null,email:null,password:null,confirmPassword:null}},n._onChange=n._onChange.bind(Object(V.a)(Object(V.a)(n))),n._userSignup=n._userSignup.bind(Object(V.a)(Object(V.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_onChange",value:function(e){var t=this.state;t[e.target.id]=e.target.value;var n=this.validate(t);this.setState(n)}},{key:"validate",value:function(e){e.err_form=null,e.err={f_name:null,l_name:null,email:null,password:null,confirmPassword:null};var t=function(e){var t=X.object({f_name:X.string().min(3).required().label("First Name"),l_name:X.string().min(3).required().label("Last Name"),email:X.string().email().required().label("Email"),password:X.string().min(6).max(12).required().label("Password"),confirmPassword:X.string().required().valid(X.ref("password")).label("Confirm Password").options({language:{any:{allowOnly:'!! "Password" and "Confirm Password" do not match'}}})}).options({stripUnknown:!0});return X.validate(e,t)}(e);if(t.error){var n=t.error.details[0],r=n.context.key;e.err[r]=n.message,e.validated=!1}else e.validated=!0;return e}},{key:"_renderFormError",value:function(){return this.state.err_form?a.a.createElement("div",{className:"text-center",style:{width:"100%",marginTop:"0.25rem",fontSize:"80%",color:"#dc3545"}},this.state.err_form):a.a.createElement("span",null)}},{key:"_userSignup",value:function(){var e=this;ne.create({email:this.state.email,password:this.state.password,f_name:this.state.f_name,l_name:this.state.l_name}).then(function(t){e.setState({isRegistered:!0})}).catch(function(t){e.setState({err_form:t.message})})}},{key:"render",value:function(){var e=this.state.validated;return this.state.isRegistered?a.a.createElement(F.a,{className:"h-100 pr-4 align-items-center"},a.a.createElement(Y.a,{className:"text-center"},a.a.createElement("h2",null,"Thank you!!!"),a.a.createElement("h5",null,"Know you are all set! ",a.a.createElement(l.b,{to:"/login"},"Login")," and start your first challenge now!"))):a.a.createElement(F.a,{className:"h-100 pr-4"},a.a.createElement(Y.a,{className:"py-4"},a.a.createElement("h1",null,"Sign Up"),a.a.createElement(z.a,{className:"my-3"},a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{type:"text",id:"f_name",placeholder:"First Name",value:this.state.f_name,onChange:this._onChange,isInvalid:!!this.state.err.f_name}),a.a.createElement(z.a.Control.Feedback,{type:"invalid"},this.state.err.f_name)),a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{type:"text",id:"l_name",placeholder:"Last Name",value:this.state.l_name,onChange:this._onChange,isInvalid:!!this.state.err.l_name}),a.a.createElement(z.a.Control.Feedback,{type:"invalid"},this.state.err.l_name)),a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{type:"email",id:"email",placeholder:"name@example.com",value:this.state.email,onChange:this._onChange,isInvalid:!!this.state.err.email}),a.a.createElement(z.a.Control.Feedback,{type:"invalid"},this.state.err.email)),a.a.createElement(z.a.Group,null,a.a.createElement(z.a.Control,{type:"PASSWORD",id:"password",placeholder:"Password",value:this.state.password,onChange:this._onChange,isInvalid:!!this.state.err.password}),a.a.createElement(z.a.Control.Feedback,{type:"invalid"},this.state.err.password)),a.a.createElement(z.a.Group,{style:{height:"60px"},className:"mb-1"},a.a.createElement(z.a.Control,{type:"PASSWORD",id:"confirmPassword",placeholder:"Confirm Password",onChange:this._onChange,isInvalid:!!this.state.err.confirmPassword}),a.a.createElement(z.a.Control.Feedback,{type:"invalid"},this.state.err.confirmPassword)),this._renderFormError(),a.a.createElement(K.a,{style:{width:"155px"},disabled:!e,type:"button",onClick:this._userSignup},"SIGN UP"),a.a.createElement("h6",{className:"mt-5 text-center"},"Already has an account? ",a.a.createElement(l.b,{to:"/login"},"Login")))))}}]),t}(a.a.Component),ae=(n(384),n(206)),se=n.n(ae),oe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(L.a,{fluid:!0,className:"pb-5 px-0 position-relative"},a.a.createElement("div",{id:"moon",className:"bg-winter d-flex"}),a.a.createElement(L.a,{fluid:window.innerWidth<992},a.a.createElement(se.a,{style:{zIndex:1}},a.a.createElement(F.a,null,a.a.createElement(Y.a,null,a.a.createElement("img",{className:"m-auto d-block img-fluid",src:"/images/marble.png",alt:""})),a.a.createElement(Y.a,null,this.props.children)))))}}]),t}(a.a.Component),le=function(e){function t(e){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={backgroundColor:this.props.bgColor};return a.a.createElement(L.a,{fluid:!0,style:e,className:"d-flex "},a.a.createElement(L.a,{className:"d-flex py-5 border-bottom border-primary"},a.a.createElement(F.a,{className:"m-auto"+(this.props.noGutters?" no-gutter":"")},this.props.children)))}}]),t}(a.a.Component),ie=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.history;return a.a.createElement(L.a,{fluid:!0,className:"bg-light px-0"},a.a.createElement(oe,null,a.a.createElement(ee,{history:e})),a.a.createElement(L.a,{fluid:!0},a.a.createElement(le,null,a.a.createElement(Y.a,null,a.a.createElement("h3",null,"Lorem Ipsum"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.")),a.a.createElement(Y.a,null,a.a.createElement("h3",null,"Lorem Ipsum"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.")),a.a.createElement(Y.a,null,a.a.createElement("h3",null,"Lorem Ipsum"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."))),a.a.createElement(le,{noGutters:!0},a.a.createElement(Y.a,{className:"text-center"},a.a.createElement("h2",null,"Lorem Ipsum"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."))),a.a.createElement(le,null,a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Fernando Marinho"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Gustavo Lessa"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Lucival"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Rafael Barros"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")))))}}]),t}(a.a.Component);var ce=n(65),ue=n.n(ce),me=(n(569),n(570),n(196)),de=n(193),pe=n(194),he=n(195);ue.a.registerLanguage("ts",me),ue.a.registerLanguage("bash",de),ue.a.registerLanguage("json",pe),ue.a.registerLanguage("shell",he),ue.a.configure({languages:["ts","shell","bash","json"]});var fe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=o.a.findDOMNode(this);ue.a.highlightBlock(e)}},{key:"render",value:function(){var e=this.props.children;return a.a.createElement("pre",{className:"rounded-lg py-3 px-4 mx-n4 mb-4"},a.a.createElement("code",null,e))}}]),t}(a.a.PureComponent);var ye={introduction:"/tutorial/",structure:"/tutorial/structure",database:"/tutorial/database",entities:"/tutorial/entities",repositories:"/tutorial/repositories",router:"/tutorial/router",validations:"/tutorial/validations",services:"/tutorial/services",controllers:"/tutorial/controllers",bodyParser:"/tutorial/body-parser"},ge=[{isIndex:!0,title:"Introduction",path:ye.introduction,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Introduction"),a.a.createElement("p",null,"A Basic tutorial on how to build an API in node.js using TypeScript, express, TypeORM and MySQL Database."),a.a.createElement("p",{className:"lead"},"Prerequisites"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{href:"https://nodejs.org"},"Node.js")),a.a.createElement("li",null,a.a.createElement("a",{href:"https://gitforwindows.org/"},"Git Bash")," (for windows users)"),a.a.createElement("li",null,a.a.createElement("a",{href:"https://dev.mysql.com/doc/mysql-installation-excerpt/5.7/en/"},"MySQL 5.7 Database"))),a.a.createElement("p",{className:"lead"},"Scenario"),a.a.createElement("p",null,"In this tutorial we are going to build a simple blog where users will have roles, profile images and can create articles."),a.a.createElement("p",{className:"lead"}," Database Schema"),a.a.createElement("img",{src:"/images/databaseSchema.png",width:"100%"}))}},{isIndex:!0,title:"Setting Up the Project",path:ye.structure,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Setting Up the Project"),a.a.createElement("p",null,"Create a new folder called ",a.a.createElement("code",null,"my-project")," and inside it type $",a.a.createElement("code",null,"npm init"),". This will fire some questions that you can setup:"),a.a.createElement(fe,null,'npm init \n          \npackage name: (javascript) my-project\nversion: (1.0.0) 0.1.0\ndescription: Fubeca API Tutorial\nentry point: (index.js) app.ts\ntest command: \ngit repository: \nkeywords: \nauthor: Marble Tech\nlicense: (ISC) \nAbout to write to /home/rbsrafa/projects/javascript/package.json:\n\n{\n  "name": "my-project",\n  "version": "0.1.0",\n  "description": "Fubeca API Tutorial",\n  "main": "app.ts",\n  "scripts": {\'{\'}\n    "test": "echo "Error: no test specified" && exit 1"\n  },\n  "author": "Marble Tech",\n  "license": "ISC"\n}\n\n\nIs this OK? (yes) y'),a.a.createElement("p",null,"By chosing yes a ",a.a.createElement("code",null,"package.json")," file will be created for you. Now you need to install all the dependencies of the project with the command:"),a.a.createElement(fe,null,"$ npm install --save body-parser chai express joi mocha nyc mysql2 reflect-metadata supertest ts-node typeorm typescript nodemon dotenv multer @types/body-parser @types/chai @types/express @types/joi @types/mocha @types/node @types/node @types/supertest @types/dotenv @types/multer"),a.a.createElement("p",null,"This command will create a ",a.a.createElement("code",null,"node_modules")," folder and place all the dependencies inside it. It also creates a ",a.a.createElement("code",null,"package-lock.json")," file for you. Once npm finishes the installation type ",a.a.createElement("code",null,"tsc --init")," it will create a file called ",a.a.createElement("code",null,"tsconfig.json"),", this file is responsible for the typescript configuration. We need to set the following configurations in ",a.a.createElement("code",null,"tsconfig.json"),":"),a.a.createElement(fe,null,'{\n"compilerOptions": {\n    /* Basic Options */\n    "target": "es5",\n    "module": "commonjs",\n    "lib": ["es6", "dom"],\n    \n    /* Strict Type-Checking Options */\n    "strict": true,\n    "esModuleInterop": true,\n\n    /* Experimental Options */\n    "experimentalDecorators": true,\n    "emitDecoratorMetadata": true,\n    }\n}'),a.a.createElement("p",null,"Create a file named ",a.a.createElement("code",null,"nodemon.json")," and add these lines of code:"),a.a.createElement(fe,null,'{\n  "watch": ["src", "tsconfig.json"],\n  "ext": "ts",\n  "ignore": ["src/**/*.spec.ts"],\n  "exec": "ts-node ./src/server/server.ts"\n}'),a.a.createElement("p",null,"We will use the ",a.a.createElement("code",null,"dotenv")," library to read the system environment variables without having to set them in our local machine. To do it create a file called ",a.a.createElement("code",null,".env")," in the root folder ",a.a.createElement("code",null,"my-project"),". We are going to create the environment inside this file and read their values in our application. Please ",a.a.createElement("strong",null,"DO NOT FORGET")," to change the values in ",a.a.createElement("code",null,"DATABASE_USER")," and ",a.a.createElement("code",null,"DATABASE_PASSWORD")," to match your database settings:"),a.a.createElement(fe,null,'//my-project/.env\n\n# SERVER\nSERVER_PORT=3000\n\n# DATABASE\nDATABASE_HOST="localhost"\nDATABASE_USER="user"\nDATABASE_PASSWORD="password"\nDATABASE_DB="my_project"'),a.a.createElement("p",null,"Create a folder named ",a.a.createElement("code",null,"src"),". Inside the ",a.a.createElement("code",null,"src")," folder create 2 other folders: ",a.a.createElement("code",null,"client")," and ",a.a.createElement("code",null,"server"),". Inside the ",a.a.createElement("code",null,"server")," folder create 2 files: ",a.a.createElement("code",null,"app.ts")," and ",a.a.createElement("code",null,"server.ts"),". At this point your project structure should look like this:"),a.a.createElement("img",{src:"./images/initialFolderStructure.png",width:"100%"}),a.a.createElement("p",null,"To test if everything is working we first need to modify the ",a.a.createElement("code",null,"package.json"),' file a little bit. Open it and add the "start" script inside the object "scripts":'),a.a.createElement(fe,null,'{\n  "name": "my-project",\n  "version": "0.1.0",\n  "description": "",\n  "main": "app.ts",\n  "scripts": {\n    "start":"nodemon", // insert this line\n    "test": "echo \'Error: no test specified\' && exit 1"\n  },\n  "author": "",\n  "license": "ISC",\n  "dependencies": {\n    "@types/body-parser": "^1.17.0",\n    "@types/chai": "^4.1.7",\n    "@types/dotenv": "^6.1.0",\n    "@types/express": "^4.16.1",\n    "@types/joi": "^14.3.2",\n    "@types/mocha": "^5.2.6",\n    "@types/node": "^11.9.5",\n    "@types/supertest": "^2.0.7",\n    "body-parser": "^1.18.3",\n    "chai": "^4.2.0",\n    "dotenv": "^6.2.0",\n    "express": "^4.16.4",\n    "joi": "^14.3.1",\n    "mocha": "^6.0.2",\n    "mysql2": "^1.6.5",\n    "nodemon": "^1.18.10",\n    "nyc": "^13.3.0",\n    "reflect-metadata": "^0.1.13",\n    "supertest": "^3.4.2",\n    "ts-node": "^8.0.2",\n    "typeorm": "^0.2.14",\n    "typescript": "^3.3.3333"\n  }\n}'),a.a.createElement("p",null,"This change allows for running the application typing ",a.a.createElement("code",null,"npm start")," in the terminal. Finally change the code inside the ",a.a.createElement("code",null,"app.ts")," and ",a.a.createElement("code",null,"server.ts")," respectively:"),a.a.createElement(fe,null,"//my-project/src/server/app.ts\n\nimport express from 'express';\n\nexport async function createApp() {\n\n    // Create express application\n    const app = express();\n\n    // Add the root route '/' to application\n    app.get('/', (req, res) => {\n      res.send(\"<h2>It's working</h2>\");\n    });\n\nreturn app;\n}"),a.a.createElement(fe,null,"//my-project/src/server/server.ts\n\nimport dotenv from 'dotenv';\n// Get Environment Variables from .env file\ndotenv.config();\nimport { createApp } from \"./app\";\n\n(async () => {\n\n    // Create the express application\n    const app = await createApp();\n\n    // Get the port number from the Environment Variable\n    const port = process.env.SERVER_PORT; \n\n    // Start the server\n    app.listen(port, () => {\n        console.log(\n            `The server is running on port ${port}!`\n        );\n    });\n\n})();\n"),a.a.createElement("p",null,"On your terminal type the command:"),a.a.createElement(fe,null,"npm start"),a.a.createElement("p",null,"Nodemon will be watching for any changes in the entire project and will automatically reload it for us. We only have to save the changed files and see the magic happen. Open your browser of preference and type ",a.a.createElement("code",null,"localhost:3000"),". You should then see the message `It's working` on it. If for some reason this port is already in use a error message will be shown in your terminal, to solve this problem you can just change the port number in the server.ts file or turn off your other application that is using this port."),a.a.createElement("img",{src:"/images/itIsWorking.png",width:"100%"}))}},{isIndex:!1,title:"Database Configuration",path:ye.database,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Database Configuration"),a.a.createElement("p",null,"To link your application with the MySQL Database you'll need to follow a few steps:"),a.a.createElement("p",{className:"lead"},"Create the MySQL database"),a.a.createElement("p",null,"Create a new database called ",a.a.createElement("code",null,"my_project")," using a MySQL database manager or type the following command in mysql shell:"),a.a.createElement(fe,null,"mysql> create database my_project;"),a.a.createElement("p",null,"Inside the ",a.a.createElement("code",null,"server")," folder create a new folder called ",a.a.createElement("code",null,"config")," and add a new file named ",a.a.createElement("code",null,"db.ts"),"."),a.a.createElement(fe,null,'//my-project/src/server/config/db.ts\nimport { createConnection, getConnectionManager } from "typeorm";\n\nexport async function createDbConnection() {\n\n  // Set database variables from environment\n  const DATABASE_HOST = process.env.DATABASE_HOST;\n  const DATABASE_PASSWORD = process.env.DATABASE_PASSWORD;\n  const DATABASE_USER = process.env.DATABASE_USER;\n  const DATABASE_DB = process.env.DATABASE_DB;\n\n  // Create a database connection\n  await createConnection({\n    type: "mysql",\n    host: DATABASE_HOST,\n    port: 3306,\n    username: DATABASE_USER,\n    password: DATABASE_PASSWORD,\n    database: DATABASE_DB,\n    entities: [],\n    synchronize: true\n  });\n\n  // Check if connection is successful\n  const connection = getConnectionManager();\n  console.log(\'Is DB connected:\', connection.connections[0].isConnected);\n}\n'),a.a.createElement("p",null,"Now open the ",a.a.createElement("code",null,"app.ts")," file, import the createDbConnection and call the function to initialise the database:"),a.a.createElement(fe,null,"//my-project/src/server/app.ts\n\nimport express from 'express';\nimport {'{'} createDbConnection } from './config/db'; //  Add this line\n\nexport async function createApp() {'{'}\n\n  await createDbConnection(); //  Add this line\n\n  const app = express();\n\n  app.get('/', (req, res) => {'{'}\n    res.send('<h2>It's working</h2>');\n  });\n\n  return app;\n}"),a.a.createElement("p",null,"If everything was done right you should see this message on your terminal:"),a.a.createElement(fe,null,"Is DB connected: true\nThe server is running on port 3000!"))}},{isIndex:!1,title:"Creating the Entity Classes",path:ye.entities,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Creating the Entity Classes"),a.a.createElement("p",null,"Now that the project is running and the database connection was established you will learn how to create the entities with the support of typeORM that is an Object Relational Mapper. This library allows for the creation of Entities in a TypeScript Class that will be automatically mapped into a table in the database. Inside the ",a.a.createElement("code",null,"server")," folder create a folder named ",a.a.createElement("code",null,"entities")," and place these four files (It is good practice to name the Entities with the first letter capitalized eg. ",a.a.createElement("code",null,"User"),"):"),a.a.createElement(fe,null,"//my-project/src/server/entities/User.ts\n\nimport { Article } from './Article';\nimport { \n  Entity, Column, PrimaryGeneratedColumn, \n  OneToMany, ManyToMany, JoinTable, OneToOne \n} from 'typeorm';\nimport{ Role } from './Role';\nimport { ProfileImage } from './ProfileImage';\n\n@Entity('users') //  Name of the database table\nexport class User {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn() \n  public id!: number;\n\n  //  Add 'not null' constraint\n  @Column({nullable: false}) \n  public firstName!: string;\n\n  @Column({nullable: false})\n  public lastName!: string;\n\n  // Defines the property as unique\n  @Column({nullable:false, unique: true}) \n  public email!: string;\n\n  @Column({nullable: false})\n  public password!: string;\n\n  // A user can have many articles\n  @OneToMany(type => Article, article => article.user)\n  public articles!: Article;\n\n  // A user can have many roles and a role can be assigned to many users\n  @ManyToMany(type => Role, role => role.users)\n  @JoinTable({\n    name: 'user_roles', //  junction table name in database\n    joinColumn: {name: 'userId'}, //  property name of the owner\n    inverseJoinColumn: {name: 'roleId'} //  property name of the inverse relation\n  })\n  public roles!: Role[];\n\n  @OneToOne(type => ProfileImage, profileImage => profileImage.user)\n  public profileImage!: ProfileImage;\n\n  public constructor(\n    firstName: string,\n    lastName: string,\n    email: string,\n    password: string\n  ){\n    this.firstName = firstName;\n    this.lastName = lastName;\n    this.email = email;\n    this.password = password;\n  }\n}\n      \n      "),a.a.createElement(fe,null,"//my-project/src/server/entities/Article.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, ManyToOne} from 'typeorm';\nimport { User } from './User';\n\n@Entity('articles') //  Name of the table in database\nexport class Article {\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n  // Add 'not null' constraint\n  @Column({nullable: false})\n  public title!: string;\n\n  // Define the content to be of type 'long text'\n  @Column({type: 'longtext'})\n  public content!: string;\n\n  @ManyToOne(\n    type => User, user => user.articles, \n    {onDelete: 'CASCADE'} //  delete the association if user is deleted\n  )\n  public user!: User;\n\n  public constructor(\n    title: string,\n    content: string,\n  ){\n    this.title = title;\n    this.content = content;\n  }\n}\n"),a.a.createElement(fe,null,"//my-project/src/server/entities/ProfileImage.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, OneToOne, JoinColumn } from 'typeorm';\nimport { User } from './User';\n\n@Entity('profile_images') //  Name of the table in database\nexport class ProfileImage {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n  // Add 'not null' constraint\n  @Column({nullable: false})\n  public url!: string;\n\n  @OneToOne(\n    type => User, user => user.profileImage,\n    {onDelete: 'CASCADE'} //  Deletes the association if user is deleted\n  )\n  @JoinColumn()\n  public user!: User\n\n  public constructor(\n    url: string\n  ){\n    this.url = url;\n  }\n}\n"),a.a.createElement(fe,null,"//my-project/src/server/entities/Role.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, ManyToMany} from 'typeorm';\nimport { User } from './User';\n\n@Entity('roles') //  name of table in database\nexport class Role {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n\n  @Column({\n    type: 'enum', //  declare the type as ENUM\n    enum:['user', 'author', 'admin'], //  Property can only be one of them\n    nullable: false, //  Not null constraint\n    unique: true // Value must be unique\n  })\n  public name!: string;\n\n  // A role can be assigned to many users and a user can have many roles\n  @ManyToMany(type => User, user => user.roles)\n  public users!: User[];\n\n  public constructor(\n    name: string\n  ){\n    this.name = name;\n  }\n}\n"),a.a.createElement("p",null,"TypeORM provides many functionalities. In these files we have used some annotations to inform what configuration should be passed to the tables, columns and relationships:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"@Entity")," - Declares the class as an table. As an option we can pass the name of the table, if blanc the class name will be used."),a.a.createElement("li",null,a.a.createElement("code",null,"@Column")," - Declares the class properties as columns of the table. Many options can be passed through it, for more information see ",a.a.createElement("a",{href:"https://github.com/typeorm/typeorm/blob/master/docs/entities.md#column-options"},"TypeORM - Column Options")),a.a.createElement("li",null,a.a.createElement("code",null,"@OneToOne")," - Declares a one-to-one relationship between two tables. A foreign key is added in the table where it is declared. See more at ",a.a.createElement("a",{href:"https://github.com/typeorm/typeorm/blob/master/docs/one-to-one-relations.md"},"TypeORM - One To One Relations")),a.a.createElement("li",null,a.a.createElement("code",null,"@ManyToOne")," / ",a.a.createElement("code",null,"@OneToMany")," - Declares a many-to-one / one-to-many relationship between two tables. The @ManyToOne annotation inserts a foreign key with the id of the associated table. See more at ",a.a.createElement("a",{href:"https://github.com/typeorm/typeorm/blob/master/docs/many-to-one-one-to-many-relations.md"},"TypeORM - Many To One / One To Many Relations")),a.a.createElement("li",null,a.a.createElement("code",null,"@ManyToMany")," - Declares a many-to-many relationship between two tables. The owner table must have the @JoinTable annotation in its class. A junction with the combined name of the tables will be automaticaly created in the database, this name can be changed passing some options as we have seen in the code. When using the annotation in both sides of the relationship the bi-directional searching is enabled in the typeORM repository methods as we will see during the controllers creation. To see more access ",a.a.createElement("a",{href:"https://github.com/typeorm/typeorm/blob/master/docs/many-to-many-relations.md"},"TypeORM - Many To Many Relations"))),a.a.createElement("p",null,"If you run the application now nothing will be created in the database, it is because we need to inform TypeORM which entities to map to the database. Open the ",a.a.createElement("code",null,"db.ts")," file and import all the created entities and add them in the entities array inside the ",a.a.createElement("code",null,"createConnection")," function:"),a.a.createElement(fe,null,"//my-project/src/server/config/db.ts\n\n\nimport { createConnection, getConnectionManager } from \"typeorm\";\nimport{ User } from '../entities/User'; //  Add this line\nimport { Article } from '../entities/Article'; //  Add this line\nimport { Role } from '../entities/Role'; //  Add this line\nimport { ProfileImage } from '../entities/ProfileImage'; //  Add this line\n\nexport async function createDbConnection() {\n\n  // Set database variables from environment\n  const DATABASE_HOST = process.env.DATABASE_HOST;\n  const DATABASE_PASSWORD = process.env.DATABASE_PASSWORD;\n  const DATABASE_USER = process.env.DATABASE_USER;\n  const DATABASE_DB = process.env.DATABASE_DB;\n\n  // Create a database connection\n  await createConnection({\n    type: \"mysql\",\n    host: DATABASE_HOST,\n    port: 3306,\n    username: DATABASE_USER,\n    password: DATABASE_PASSWORD,\n    database: DATABASE_DB,\n    entities: [User, Article, Role, ProfileImage], //  Add this line\n    synchronize: true,\n  });\n\n  // Check if connection is successful\n  const connection = getConnectionManager();\n  console.log('Is DB connected:', connection.connections[0].isConnected);\n\n  // Create Roles (if non existent) on database connection\n  try {\n    const roleRepository = await connection.get('default').getRepository(Role);\n\n    // If user role does not exist, create it\n    if(! await roleRepository.findOne({where: {name: 'user'}})){\n      await roleRepository.save({name:'user'});\n    }\n\n    // If author role does not exist, create it\n    if(! await roleRepository.findOne({where: {name: 'author'}})){\n      await roleRepository.save({name:'author'});\n    }\n\n    // If admin role does not exist, create it\n    if(! await roleRepository.findOne({where:{name: 'admin'}})){\n      await roleRepository.save({name:'admin'});\n    }\n\n  }catch(error){\n    console.log(error);\n  }\n}\n    \n    "),a.a.createElement("p",null,"At this point you are able to run the application with the command ",a.a.createElement("code",null,"npm start")," and check the created tables in your database:"),a.a.createElement(fe,null,"\nmysql> describe articles; describe profile_images; describe roles; describe user_roles; describe users;\n\n+---------+--------------+------+-----+---------+----------------+\n| Field   | Type         | Null | Key | Default | Extra          |\n+---------+--------------+------+-----+---------+----------------+\n| id      | int(11)      | NO   | PRI | NULL    | auto_increment |\n| title   | varchar(255) | NO   |     | NULL    |                |\n| content | varchar(255) | NO   |     | NULL    |                |\n| userId  | int(11)      | YES  | MUL | NULL    |                |\n+---------+--------------+------+-----+---------+----------------+\n4 rows in set (0.00 sec)\n\n+--------+--------------+------+-----+---------+----------------+\n| Field  | Type         | Null | Key | Default | Extra          |\n+--------+--------------+------+-----+---------+----------------+\n| id     | int(11)      | NO   | PRI | NULL    | auto_increment |\n| url    | varchar(255) | NO   |     | NULL    |                |\n| userId | int(11)      | YES  | UNI | NULL    |                |\n+--------+--------------+------+-----+---------+----------------+\n3 rows in set (0.00 sec)\n\n+-------+-------------------------------+------+-----+---------+----------------+\n| Field | Type                          | Null | Key | Default | Extra          |\n+-------+-------------------------------+------+-----+---------+----------------+\n| id    | int(11)                       | NO   | PRI | NULL    | auto_increment |\n| name  | enum('user','author','admin') | NO   |     | NULL    |                |\n+-------+-------------------------------+------+-----+---------+----------------+\n2 rows in set (0.01 sec)\n\n+--------+---------+------+-----+---------+-------+\n| Field  | Type    | Null | Key | Default | Extra |\n+--------+---------+------+-----+---------+-------+\n| userId | int(11) | NO   | PRI | NULL    |       |\n| roleId | int(11) | NO   | PRI | NULL    |       |\n+--------+---------+------+-----+---------+-------+\n2 rows in set (0.00 sec)\n\n+-----------+--------------+------+-----+---------+----------------+\n| Field     | Type         | Null | Key | Default | Extra          |\n+-----------+--------------+------+-----+---------+----------------+\n| id        | int(11)      | NO   | PRI | NULL    | auto_increment |\n| firstName | varchar(255) | NO   |     | NULL    |                |\n| lastName  | varchar(255) | NO   |     | NULL    |                |\n| email     | varchar(255) | NO   | UNI | NULL    |                |\n| password  | varchar(255) | NO   |     | NULL    |                |\n+-----------+--------------+------+-----+---------+----------------+\n5 rows in set (0.00 sec)\n  "),a.a.createElement("p",null,"Note that the three Roles (",a.a.createElement("code",null,"user"),", ",a.a.createElement("code",null,"author")," and ",a.a.createElement("code",null,"admin"),") were already saved in the database as well:"),a.a.createElement(fe,null,"\nmysql> select * from roles;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | user   |\n|  2 | author |\n|  3 | admin  |\n+----+--------+\n3 rows in set (0.00 sec)\n"),a.a.createElement("p",null,"Let's keep track of the project structure. It should be looking like this:"),a.a.createElement("img",{src:"/images/structureAfterEntities.png",width:"100%"}))}},{isIndex:!1,title:"Creating the Repositories",path:ye.repositories,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Creating the Repositories"),a.a.createElement("p",null,"To be able to access the database we will import the Repository Layer provided by TypeORM. A repository will be needed for each entity. Please create a new folder called ",a.a.createElement("code",null,"repositories")," inside the ",a.a.createElement("code",null,"server")," folder and place these 4 files:"),a.a.createElement(fe,null,"//my-project/src/server/repositories/userRepository.ts\n  \nimport { getConnection } from 'typeorm';\nimport { User } from '../entities/User';\n\nexport function userRepository() {\n  return getConnection().getRepository(User);\n}"),a.a.createElement(fe,null,"//my-project/src/server/repositories/articleRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { Article } from '../entities/Article';\n\nexport function articleRepository() {\n  return getConnection().getRepository(Article);\n}"),a.a.createElement(fe,null,"//my-project/src/server/repositories/profileImageRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { ProfileImage } from '../entities/ProfileImage';\n\nexport function profileImageRepository() {\n  return getConnection().getRepository(ProfileImage);\n}\n  "),a.a.createElement(fe,null,"//my-project/src/server/repositories/roleRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { Role } from '../entities/Role';\n\nexport function roleRepository() {\n  return getConnection().getRepository(Role);\n}"),a.a.createElement("p",null,"As we will see when building the controllers, these repositories will provide out of the box functions for accessing, creating, deleting and changing data in the database."))}},{isIndex:!1,title:"Routes and App Router",path:ye.router,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Creating the Routes and App Router"),a.a.createElement("p",null,"To be able to access the different routes (endpoints) in the application we need to create two routes files ",a.a.createElement("code",null,"userRoutes")," and ",a.a.createElement("code",null,"articleRoutes")," and a ",a.a.createElement("code",null,"router")," that will deal with the API routing. Create a new folder called ",a.a.createElement("code",null,"routes")," inside the ",a.a.createElement("code",null,"server")," folder. Please place these two files inside it:"),a.a.createElement(fe,null,"//my-project/src/server/routes/userRoutes.ts\n\nimport express from 'express';\n\nconst routes = express.Router();\n\nroutes.get('/', (req, res) => res.send('<h1>get all users</h1>'));\nroutes.get('/:id', (req, res) => res.send('get user by id'));\nroutes.get('/:id/roles/add/:roleId', (req, res) => res.send('add role to user'));\nroutes.get('/:id/roles/remove/:roleId', (req, res) => res.send('remove role from user'));\n\nroutes.post('/', (req, res) => res.send('create user'));\n\nroutes.patch('/:id', (req, res) => res.send('update user'));\n\nroutes.delete('/:id', (req, res) => res.send('delete user'));\n\nexport default routes;"),a.a.createElement(fe,null,"//my-project/src/server/routes/articleRoutes.ts\nimport express from 'express';\n\nconst routes = express.Router();\n\nroutes.get('/', (req, res) => res.send('<h1>get all articles</h1>'));\nroutes.get('/:id', (req, res) => res.send('get article by id'));\n\nroutes.post('/', (req, res) => res.send('create article'));\n\nroutes.patch('/:id', (req, res) => res.send('update an article'));\n\nroutes.delete('/:id', (req, res) => res.send('delete an article'));\n\nexport default routes;\n\n"),a.a.createElement("p",null,"To be able to access these routes we still need to create a ",a.a.createElement("code",null,"router.ts")," file inside the ",a.a.createElement("code",null,"server")," folder:"),a.a.createElement(fe,null,"//my-project/src/server/router.ts\n\nimport articleRoutes from './routes/articleRoutes';\n  import userRoutes from './routes/userRoutes';\n\n  export const router = [\n    {path: '/articles', endpoints: articleRoutes},\n    {path: '/users', endpoints: userRoutes}\n  ];"),a.a.createElement("p",null,"Finally we need to import this newly created router into the ",a.a.createElement("code",null,"app.ts")," file and initialize it:"),a.a.createElement(fe,null,"//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router'; // Add this line\n\nexport async function createApp() {\n\n  await createDbConnection();\n\n  const app = express();\n\n  // For each route in the router profide the path and response\n  router.forEach(route => { // Add this loop\n    app.use(`/api/v1${route.path}`, route.endpoints);\n  });\n  \n  app.get('/', (req, res) =>{\n    res.send('<h2>It's working</h2>');\n  });\n\n  return app;\n}"),a.a.createElement("p",null,"These routes are not doing anything smart for now, they are only returning some dummy text as the response. Run the app with the command ",a.a.createElement("code",null,"npm start"),", open your browser and type the following routes in the browser address:"),a.a.createElement("p",null,"localhost:3000/api/v1/users"),a.a.createElement("img",{src:"/images/getAllUsersRoute.png",width:"100%"}),a.a.createElement("p",null,"localhost:3000/api/v1/articles"),a.a.createElement("img",{src:"/images/getAllArticlesRoute.png",width:"100%"}))}},{isIndex:!1,title:"Implementing validation",path:ye.validations,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Implementing validation"),a.a.createElement("p",null,"To add a layer of validation in our API we will use a library called Joi. It provides functionalities to help on data validation. This library was already installed within the ",a.a.createElement("code",null,"npm install")," command at the begining of this tutorial.",a.a.createElement("strong",null,"To check all the project dependencies open the package.json file and check the dependencies object."),"Create a new folder called ",a.a.createElement("code",null,"validation")," inside the ",a.a.createElement("code",null,"server")," folder and add these two files:"),a.a.createElement(fe,null,"//my-project/src/server/validation/userValidation.ts\n\nimport { User } from '../entities/User';\nimport * as joi from 'joi';\n\nexport function validateUser(user: User){\n  const schema = joi.object({\n    // Should be a string with at maximum 30 characters\n    firstName: joi.string().max(30),\n    // Should be a string with at maximum 50 characters\n    lastName: joi.string().max(50),\n    // Should be a string in an email format\n    email: joi.string().email(),\n    // Should be a string with at least 6 characters\n    password: joi.string().min(6)\n    // The strip unknown options removes unknown elements from \n    // objects and arrays, blocking their inclusion in the database \n  }).options({stripUnknown: true});\n\n  return joi.validate(user, schema);\n}"),a.a.createElement(fe,null,"//my-project/src/server/validation/articleValidation.ts\n\n\nimport { Article } from '../entities/Article';\nimport * as joi from 'joi';\n\nexport function validateArticle(article: Article){\n  const schema = joi.object({\n    // Should be a string with at maximum 50 characters\n    title: joi.string().max(50),\n    // Should be a string with at minimum 50 characters\n    content: joi.string().min(50),\n    // The strip unknown options removes unknown elements from \n    // objects and arrays, blocking their inclusion in the database \n  }).options({stripUnknown: true});\n\n  return joi.validate(article, schema);\n}"),a.a.createElement("p",null,"Before moving to the next step let's check our ",a.a.createElement("strong",null,"project folder structure"),". After all those changes it should look like this:"),a.a.createElement("img",{src:"/images/folderStructureAfterValidation.png",width:"100%"}))}},{isIndex:!1,title:"Creating the Services",path:ye.services,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Creating the Services"),a.a.createElement("p",null,"The service classes will be used to abstract data manipulation and logic implementation from our future controller classes, leaving the controllers responsible only for calling methods from the services classes. We are going to create five services, one for each entity and a file uploader service to be able to upload profile pictures. Inside the ",a.a.createElement("code",null,"server")," folder create a new folder called ",a.a.createElement("code",null,"services")," and place these five files:"),a.a.createElement(fe,null,"//my-project/src/server/services/userService.ts\n\nimport { User } from './../entities/User';\nimport { userRepository } from \"../repositories/userRepository\";\nimport { Role } from '../entities/Role';\n\nexport class UserService {\n\n  public constructor() { }\n\n  public create(newUser: User) {\n    // Create a new user object\n    const user = new User(\n      newUser.firstName, newUser.lastName, \n      newUser.email, newUser.password\n    );\n    // Save user in database and return it\n    return userRepository().save(user);\n  }\n\n  public save(user: User) {\n    // Save user in database and return it\n    return userRepository().save(user);\n  }\n\n  public findAll() {\n    // Find all users in database and return then with the profile image and roles\n    return userRepository().find({ relations: ['profileImage', 'roles'] });\n  }\n\n  public findById(id: number){\n    // Find a user by id and return it with the profile image and roles\n    return userRepository().findOne(id, { relations: ['profileImage', 'roles'] });\n  }\n\n  public update(user: User, values: any) {\n    // Get all properties to be updated\n    const properties = Object.keys(values);\n    // For each property update in user\n    properties.forEach(property => {\n      (user as any)[property] = values[property];\n    });\n    // Save and return the updated user\n    return userRepository().save(user);\n  }\n\n  public delete(id: number){\n    // Delete a user by id\n    return userRepository().delete(id);\n  }\n\n  public addRole(role: Role, user: User) {\n    // Add role in the user's roles\n    user.roles.push(role);\n    // Save and return the user\n    return userRepository().save(user);\n  }\n\n  public removeRole(role: Role, user: User) {\n    // Remove the passed role from user roles\n    user.roles = user.roles.filter(r => r.name !== role.name);\n    // Save and return the user\n    return userRepository().save(user);\n  }\n\n}"),a.a.createElement(fe,null,"//my-project/src/server/services/articleService.ts\n\nimport {User } from './../entities/User';\nimport {Article } from './../entities/Article';\nimport{articleRepository } from \"../repositories/articleRepository\";\n\nexport class ArticleService{\n\n  public constructor(){ }\n\n  public create(newArticle: Article, user: User) {\n    // Asign the user as the article's owner\n    newArticle.user = user;\n    // Save the article and return it\n    return articleRepository().save(newArticle);\n  }\n\n  public findAll(){\n    // Find all articles in database\n    return articleRepository().find();\n  }\n\n  public findById(id: number){\n    // Find an article by id in database\n    return articleRepository().findOne(id, {relations: ['user']});\n  }\n\n  public update(article: Article, values: any) {\n    // Get all properties to be updated\n    const properties = Object.keys(values);\n    // For each property update in the article\n    properties.forEach(property => {\n      (article as any)[property] = (values)[property];\n    });\n    // Save and return the updated article\n    return articleRepository().save(article);\n  }\n\n  public delete(id: number) {\n    // Delete an article by id \n    return articleRepository().delete(id);\n  }\n\n}"),a.a.createElement(fe,null,'//my-project/src/server/services/roleService.ts\n\nimport {roleRepository } from "../repositories/roleRepository";\n\nexport class RoleService {\n\n  public constructor(){ }\n\n  public findAll() {\n    // Find all roles in database\n    return roleRepository().find();\n  }\n\n  public findById(id: number) {\n    // Find an article by id and return it\n    return roleRepository().findOne(id);\n  }\n\n}\n  '),a.a.createElement(fe,null,"//my-project/src/server/services/profileImageService.ts\n\nimport { User } from './../entities/User';\nimport { ProfileImage } from './../entities/ProfileImage';\nimport { profileImageRepository } from \"../repositories/profileImageRepository\";\n\nexport class ProfileImageService {\n\n  public constructor(){ }\n\n  public create(image: ProfileImage, user: User) {\n    // Assign a user to the profile image\n    image.user = user;\n    // Save and return it\n    return profileImageRepository().save(image);\n  }\n\n}\n    "),a.a.createElement(fe,null,"//my-project/src/server/services/fileUploaderService.ts\n\nimport multer from 'multer';\nimport{ Request } from 'express';\n\n// Set the file destination folder and it's filename\nconst storage = multer.diskStorage({\n  destination: (req, file, cb) => cb(null, './uploads/images'),\n  filename: (req, file, cb) => cb(null, new Date().toISOString() + file.originalname)\n});\n\n// Accepts only 'jpeg' and 'png' image formats\nconst fileFilter = (req: Request, file: any, cb: any) => {\n  if(file.mimetype === 'image/jpeg' || file.mimetype === 'image/png'){\n    cb(null, true);\n  }else{\n    cb(null, false);\n  }\n}\n\n// Return the uploader setting the max image size to 5MB\nexport const uploader = multer({\n  storage: storage,\n  limits: {fileSize: 1024*1024*5},\n  fileFilter: fileFilter\n});"),a.a.createElement("p",null,"We have informed multer to store the images in the ",a.a.createElement("strong",null,"my-project/uploads/images")," directory, but it is not enough, we still need to create these new folders and inform express about this new route. Create a new folder called ",a.a.createElement("code",null,"uploads")," inside the ",a.a.createElement("code",null,"my-project")," root folder. Inside ",a.a.createElement("code",null,"uploads")," create another folder called ",a.a.createElement("code",null,"images"),". After that open the ",a.a.createElement("code",null,"app.ts")," file and include a new route pointing to the new static folder:"),a.a.createElement(fe,null,"//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router';\n\nexport async function createApp() {\n\n  // Create database connection\n  await createDbConnection();\n\n  // Create express application\n  const app = express();\n\n  // For each route in the router use the route endpoint\n  router.forEach(route => {\n    app.use(`/api/v1${route.path}`, route.endpoints);\n  });\n\n  // Inform express to look for a new static route 'uploads/images'\n  app.use('/uploads/images', express.static('uploads/images'));\n  \n  // Add route '/' to application\n  app.get('/', (req, res) =>{\n    res.send('<h2>It's working</h2>');\n  });\n\n  return app;\n}"))}},{isIndex:!1,title:"Creating the Controllers",path:ye.controllers,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Creating the Controllers"),a.a.createElement("p",null,"The controller classes will be responsible for receiving the HTTP requests, dealing with services to process what was requested and sending a response back to the client that accessed its endpoint. For our application we only need to build two controllers. Please create a new folder named ",a.a.createElement("code",null,"controllers")," inside the ",a.a.createElement("code",null,"server")," folder and place these two classes:"),a.a.createElement(fe,null,"//my-project/src/server/controllers/userController.ts\n\nimport { ProfileImage } from './../entities/ProfileImage';\nimport { ProfileImageService } from './../services/profileImageService';\nimport { UserService } from './../services/userService';\nimport { Request, Response } from 'express';\nimport { validateUser } from '../validation/userValidation';\nimport { RoleService } from '../services/roleService';\n\nconst userService = new UserService();\nconst roleService = new RoleService();\nconst imageService = new ProfileImageService();\n\nexport default class UserController {\n\n  public constructor() { }\n\n  public async create(req: Request, res: Response) {\n    try {\n\n      // Validate user input\n      const validation = validateUser(req.body);\n\n      // If any error return a Bad Request status and error details\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Create a new user with given inputs\n      let newUser = await userService.create(req.body);\n\n      // Get the role 'user' with id = 1\n      const userRole = await roleService.findById(1);\n\n      // A file has been sent, create a profile image and assign it to the user\n      if(req.file) {\n        const profileImage = new ProfileImage(`http://localhost:3000/${req.file.path}`)\n        await imageService.create(profileImage, newUser);\n      }\n\n      // Get the create user from database\n      const user = await userService.findById(newUser.id);\n\n      // Add the 'user' role to the user\n      await userService.addRole(userRole!, user!);\n\n      // // Return the created user from database\n      return res.status(201).json(user);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async update(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n      const values = req.body;\n\n      // Validate user input\n      const validation = validateUser(req.body);\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find user by id\n      const user = await userService.findById(id);\n      // If the user is not found return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: `User id ${id} not found`});\n\n      // Update user properties to passed values\n      const updated = await userService.update(user, values);\n\n      // Return updated user\n      res.status(200).json(updated);\n      \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async findAll(req: Request, res: Response) {\n    try {\n      // Find all users from database\n      const users = await userService.findAll();\n\n      // Return found users to client\n      return res.status(200).json(users);\n\n    }catch(error) {\n      console.log(error);\n      return res.status(500).json(error);\n    }\n  }\n\n  public async findById(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(id);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: `User id ${id} not found`});\n\n      // Return found user\n      return res.status(200).json(user);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async delete(req: Request, res: Response) {\n    try {\n      // Get id from request parameters\n      const id = req.params.id;\n\n      // Delete user from database\n      const deleted = await userService.delete(id);\n\n      // If no user deleted, return Not Found error\n      if(deleted.affected === 0) return res.status(404).json({error: `User id ${id} not found`});\n    \n      // Return status OK with deletion message\n      return res.status(200).json({message: `User id ${id} deleted`});\n    \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async addRole(req: Request, res: Response) {\n    try {\n      const roleId = req.params.roleId;\n      const userId = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: `User id ${userId} not found`});\n\n      // Find role to be added by its id\n      const role = await roleService.findById(roleId);\n      // If role does not exist return a 404 'Not found' error\n      if(!role) return res.status(404).json({error: `Role id ${roleId} not found`});\n\n      // Add role to the user\n      const updated = await userService.addRole(role, user);\n\n      // Return updated user\n      res.status(201).json(updated);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async removeRole(req: Request, res: Response) {\n    try {\n      const roleId = req.params.roleId;\n      const userId = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: `User id ${userId} not found`});\n\n      // Find role by id\n      const role = await roleService.findById(roleId);\n      // If role does not exist return a 404 'Not found' error\n      if(!role) return res.status(404).json({error: `Role id ${roleId} not found`});\n\n      // Remove the passed role from user\n      const updated = await userService.removeRole(roleId, user);\n\n      // Return the updated user\n      res.status(200).json(updated);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n}\n  "),a.a.createElement(fe,null,"//my-project/src/server/controllers/articleController.ts\n\nimport { UserService } from './../services/userService';\nimport { Request, Response } from 'express';\nimport { ArticleService } from '../services/articleService';\nimport { validateArticle } from '../validation/articleValidation';\n\nconst articleService = new ArticleService();\nconst userService = new UserService();\n\nexport class ArticleController {\n\n  public constructor() { }\n\n  public async create(req: Request, res: Response) {\n    try {\n      const userId = req.body.userId;\n\n      // Create a new article from request body\n      const newArticle = req.body.article;\n\n      // Validate article input\n      const validation = validateArticle(newArticle);\n\n      // If any error return a Bad Request status and error details\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If user does not exist return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: `User id ${userId} not found`});\n\n      // Create a new article with given inputs and the owner user\n      const article = await articleService.create(newArticle, user);\n\n      // Return the created article from database\n      return res.status(201).json(article);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async update(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n      const values = req.body;\n\n      // Validate user input\n      const validation = validateArticle(req.body);\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find article by id\n      const article = await articleService.findById(id);\n      // If article does not exist return a 404 'Not found' error\n      if(!article) return res.status(404).json({error: `Article id ${id} not found`});\n\n      // Update article with passed values\n      const updated = await articleService.update(article, values);\n\n      // Return the updated article\n      res.status(200).json(updated);\n      \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async findAll(req: Request, res: Response) {\n    try {\n      // Find all articles from database\n      const articles = await articleService.findAll();\n\n      // Return all found articles\n      return res.status(200).json(articles);\n\n    }catch(error) {\n      console.log(error);\n      return res.status(500).json(error);\n    }\n  }\n\n  public async findById(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n\n      // Find article by id\n      const article = await articleService.findById(id);\n      // If article does not exist return a 404 'Not found' error\n      if(!article) return res.status(404).json({error: `Article id ${id} not found`});\n\n      // Return article to the client\n      return res.status(200).json(article);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async delete(req: Request, res: Response) {\n    try {\n      // Get id from request parameters\n      const id = req.params.id;\n\n      // Delete article from database\n      const deleted = await articleService.delete(id);\n\n      // If no article deleted, return Not Found error\n      if(deleted.affected === 0) return res.status(404).json({error: `Article id ${id} not found`});\n    \n      // Return status OK with deletion message\n      return res.status(200).json({message: `Article id ${id} deleted`});\n    \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n}\n  "),a.a.createElement("p",null,"We have created a method to deal with each one of the user and article routes we have previously created. To link these methods to the API routes we have to change the user and article routes a little bit:"),a.a.createElement(fe,null,"//my-project/src/server/routes/userRoute.ts\n\nimport express from 'express';\nimport UserController from '../controllers/userController';\nimport { uploader } from '../services/fileUploaderService';\n\n// Initialise user controller\nconst userController = new UserController();\n\n// Create a new express router\nconst routes = express.Router();\n\n// Add routes to the router\n\nroutes.get('/', userController.findAll);\nroutes.get('/:id', userController.findById);\nroutes.get('/:id/roles/add/:roleId', userController.addRole);\nroutes.get('/:id/roles/remove/:roleId', userController.removeRole);\n\nroutes.post('/', uploader.single('profileImage'), userController.create);\n\nroutes.patch('/:id', userController.update);\n\nroutes.delete('/:id', userController.delete);\n\nexport default routes;\n  "),a.a.createElement(fe,null,"//my-project/src/server/routes/articleRoute.ts\n\nimport { ArticleController } from './../controllers/articleController';\nimport express from 'express';\n\n// Initialise user controller\nconst articleController = new ArticleController();\n\n// Create a new express router\nconst routes = express.Router();\n\n// Add routes to the router\n\nroutes.get('/', articleController.findAll);\nroutes.get('/:id', articleController.findById);\n\nroutes.post('/', articleController.create);\n\nroutes.patch('/:id', articleController.update);\n\nroutes.delete('/:id', articleController.delete);\n\nexport default routes;\n  "))}},{isIndex:!1,title:" Implementing Body Parser",path:ye.bodyParser,post:function(e){return a.a.createElement(Y.a,null,a.a.createElement("h2",null,"Implementing Body Parser"),a.a.createElement("p",null,"Now that our routes and controllers are implemented we will be able to access most of the endpoints, but not yet those that use POST methodos. Our express application can not read the values that are being passed through the body of the request. To be able to do it we need to implement the bodyParser library. Open the app.ts file and tell express to use the bodyParser library:"),a.a.createElement(fe,null,"//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router';\nimport bodyParser from 'body-parser';\n\nexport async function createApp() {\n\n  // Create database connection\n  await createDbConnection();\n\n  // Create express application\n  const app = express();\n\n  // Inform express to use bodyParser\n  app.use(bodyParser.json());\n  app.use(bodyParser.urlencoded({extended: true}));\n\n  // For each route define the path and endpoint\n  router.forEach(route => {\n    app.use(`/api/v1${route.path}`, route.endpoints);\n  });\n\n  // Inform express to look for a new static route 'uploads/images'\n  app.use('/uploads/images', express.static('uploads/images'));\n  \n  // Add route '/' to application\n  app.get('/', (req, res) => {\n    res.send(\"<h2>It's working</h2>\");\n  });\n\n  // If a  path is not found return a 404 'Not found' error\n  app.use('*', (req, res) => {\n    res.status(404).json({error: 'Route not found'});\n  });\n\n  return app;\n}"))}}],be=(n(571),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n._handleListClick=n._handleListClick.bind(Object(V.a)(Object(V.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_handleListClick",value:function(e){}},{key:"render",value:function(){var e=this;return a.a.createElement("ul",{id:"sider",className:"nav flex-column py-5"},this.props.listItems.map(function(t,n){return a.a.createElement("li",{className:"nav-item h6 px-3 "+(e.props.actualPath===t.path?" active":""),key:n,onClick:function(){return e._handleListClick(n)}},a.a.createElement("strong",null,a.a.createElement(l.b,{className:"nav-link",to:t.path},t.title)))}))}}]),t}(a.a.Component)),Ee=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.location;return a.a.createElement(L.a,{fluid:!0},a.a.createElement(F.a,null,a.a.createElement("div",{style:{width:"276px",minHeight:"100vh"},className:" bg-light "},a.a.createElement(be,{listItems:ge,actualPath:e.pathname})),a.a.createElement(Y.a,{md:8,className:"px-3"},ge.map(function(e,t){return a.a.createElement(p.b,{exact:!0,path:e.path,render:function(){return a.a.createElement(W,{className:"py-5"},e.post())},key:t})}))))}}]),t}(a.a.Component),ve=new N,we=function(){function e(t){Object(i.a)(this,e),this.domain=void 0,this.domain=t||"https://marble-tech-staging.herokuapp.com/api/v1/challenges"}return Object(c.a)(e,[{key:"getAll",value:function(){return ve.fetch(this.domain,{method:"GET"}).then(function(e){return e})}},{key:"get",value:function(e){return ve.fetch(this.domain+"/"+e,{method:"GET"}).then(function(e){return e})}},{key:"test",value:function(e,t){return ve.fetch(this.domain+"/".concat(e,"/test"),{"Content-Type":"application/json",method:"POST",body:t}).then(function(e){return e})}}]),e}(),je=n(585),Ie=n(586),Oe=function(e){function t(e){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_renderIcon",value:function(){var e={height:"inherit"};return this.props.feedback.failures>0?a.a.createElement("img",{src:"/images/x.png",className:"mx-auto d-block img-fluid",style:e}):a.a.createElement("img",{src:"/images/tick.png",className:"mx-auto d-block img-fluid",style:e})}},{key:"_renderResults",value:function(){var e=this.props.feedback.results;return a.a.createElement("ul",{className:"list-group list-group-flush"},e.map(function(e,t){return a.a.createElement("li",{className:"list-group-item "+(0==t?"border-0":"")},"passed"==e.state?a.a.createElement("i",{className:"fas fa-check text-success"}):a.a.createElement("i",{className:"fas fa-times text-danger"}),"    ",a.a.createElement("h5",{className:"d-inline"},e.title))}))}},{key:"render",value:function(){return a.a.createElement(je.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),a.a.createElement(je.a.Body,null,a.a.createElement(W,null,a.a.createElement("div",{style:{height:"200px"}},this._renderIcon())),a.a.createElement(W,{className:"py-3"},a.a.createElement("h4",null),a.a.createElement("p",null,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros:"),this._renderResults()),a.a.createElement(W,null,a.a.createElement(Ie.a,{className:"float-right",onClick:this.props.onHide},"Close"))))}}]),t}(r.Component),Ae=new we,Se=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={challengeAns:"",error:null,title:null,description:null,sampleAnswer:"",challengesList:null,fbModalShow:!1,feedback:{failures:1,results:[{title:"some text",state:"passed"},{title:"some text",state:"failed"}]}},n._onChange=n._onChange.bind(Object(V.a)(Object(V.a)(n))),n._handleSubmit=n._handleSubmit.bind(Object(V.a)(Object(V.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_onChange",value:function(e){this.setState(Object(A.a)({},this.state,Object($.a)({},e.target.id,e.target.value)))}},{key:"_renderServerErrors",value:function(){return this.state.error?a.a.createElement("div",{className:"text-center",style:{width:"100%",marginTop:"0.25rem",fontSize:"80%",color:"#dc3545"}},this.state.error):a.a.createElement("div",null)}},{key:"_renderSidebar",value:function(){var e=this.state.challengesList;return e?a.a.createElement(be,{listItems:e,actualPath:this.props.location.pathname}):a.a.createElement("div",null)}},{key:"_renderFBModal",value:function(){var e=this,t=this.state,n=t.feedback,r=t.fbModalShow;return n?a.a.createElement(Oe,{show:r,feedback:n,onHide:function(){return e.setState({fbModalShow:!1})}}):a.a.createElement("div",null)}},{key:"_handleSubmit",value:function(){var e=this;Object(C.a)(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ae.test(e.props.match.params.id,e.state.challengeAns).then(function(t){e.setState({feedback:t,fbModalShow:!0})}).catch(function(t){console.log(t),e.setState({error:t.message})});case 2:t.sent;case 3:case"end":return t.stop()}},t)}))()}},{key:"componentDidMount",value:function(){var e=this;Object(C.a)(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ae.get(e.props.match.params.id).then(function(t){var n=t.title,r=t.description,a=t.sampleAnswer;e.setState({title:n,description:r,sampleAnswer:a})}).catch(function(e){console.log(e)});case 2:return t.next=4,Ae.getAll().then(function(t){var n=t.map(function(e,t){return{title:e.title,path:"/challenges/".concat(e.id)}});e.setState({challengesList:n})}).catch(function(e){console.log(e)});case 4:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.description,r=e.challengesList;return t&&r?a.a.createElement(L.a,{fluid:!0},a.a.createElement(F.a,null,a.a.createElement("div",{style:{width:"276px"},className:" bg-light "},this._renderSidebar()),a.a.createElement(Y.a,{md:8,className:"px-3"},a.a.createElement(W,{className:"py-5"},a.a.createElement("h2",null,t),a.a.createElement("p",{className:"lead"},n),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."),a.a.createElement(z.a,null,a.a.createElement(z.a.Group,{controlId:"challengeAns"},a.a.createElement(z.a.Label,null,"Example textarea"),a.a.createElement(z.a.Control,{as:"textarea",rows:10,onChange:this._onChange}))),a.a.createElement(K.a,{className:"float-right",variant:"primary",onClick:this._handleSubmit},a.a.createElement("strong",null,"POST")),this._renderServerErrors(),this._renderFBModal())))):a.a.createElement("div",null,"loading...")}}]),t}(a.a.Component),xe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.history;return a.a.createElement(L.a,{fluid:!0,className:"bg-light px-0"},a.a.createElement(oe,null,a.a.createElement(re,{history:e})),a.a.createElement(L.a,{fluid:!0},a.a.createElement(le,null,a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Fernando Marinho"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Gustavo Lessa"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Lucival"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")),a.a.createElement(Y.a,{className:"text-center"},a.a.createElement(O.a,{src:"./images/profileImage.svg",roundedCircle:!0,className:"mb-3"}),a.a.createElement("h3",null,"Rafael Barros"),a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")))))}}]),t}(a.a.Component),Ce="/tutorial/",Re="/challenges/:id",ke="/login",Ne="/register",Te="/tutorial/",_e="/challenges/1",Ue="/login",Pe="/register",qe=[{href:"/",isIndex:!0,title:"Home",path:"/",component:a.a.createElement(ie,null),exact:!0,displayInNavBar:!1},{href:Te,isIndex:!1,title:"Tutorial",path:Ce,component:a.a.createElement(Ee,null),exact:!1},{href:_e,isIndex:!1,title:"Challenges",path:Re,component:a.a.createElement(Se,null),exact:!1,isProtected:!0},{href:Ue,isIndex:!1,title:"Login",path:ke,component:a.a.createElement(ie,null),exact:!0,onlyGuest:!0},{href:Pe,isIndex:!1,title:"Register",path:Ne,component:a.a.createElement(xe,null),exact:!0,onlyGuest:!0}],De=n(22),Le=n(208),Be=function(e){function t(e){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.isProtected,r=Object(Le.a)(e,["component","isProtected"]);return n?a.a.createElement(p.b,Object.assign({},r,{render:function(e){return E()?a.a.cloneElement(t,e=Object(A.a)({},e)):a.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}})):a.a.createElement(p.b,Object.assign({},r,{render:function(e){return a.a.cloneElement(t,e=Object(A.a)({},e))}}))}}]),t}(a.a.Component),Me=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(p.d,null,a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"",style:{minHeight:"800px",backgroundColor:"var(--white)"}},qe.map(function(e,t){var n=Object(De.a)({},e);return a.a.createElement(Be,Object.assign({},n,{key:t}))}))))}}]),t}(a.a.Component),Fe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(p.f)(function(e){var t=e.history;return a.a.createElement(q,{history:t,items:qe.filter(function(e){return!1!==e.displayInNavBar}).map(function(e){return{href:e.href,isIndex:e.isIndex,title:e.title,onlyGuest:e.onlyGuest||!1}})})});return a.a.createElement(a.a.Fragment,null,a.a.createElement(e,null),a.a.createElement(Me,null),a.a.createElement(B,null))}}]),t}(a.a.Component);o.a.render(a.a.createElement(l.a,null,a.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[210,1,2]]]);
//# sourceMappingURL=main.e468875b.chunk.js.map