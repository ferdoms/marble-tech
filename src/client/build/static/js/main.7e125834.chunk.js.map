{"version":3,"sources":["serviceWorker.ts","helpers/authGuard.ts","lib/components/user-dropdown/user-dropdown.tsx","lib/components/header/header.tsx","lib/components/footer/footer.tsx","lib/components/content/content.tsx","helpers/messagesHelper.ts","helpers/api.ts","services/AuthService.ts","lib/components/loading/loading.tsx","lib/components/login/login.tsx","validation/userValidation.ts","services/UserService.ts","lib/components/signup/signup.tsx","lib/components/hero/hero.tsx","lib/components/section/section.tsx","app/pages/home/home.tsx","lib/components/codeBlock/codeBlock.tsx","app/config/posts-routing.ts","posts/0-introduction.tsx","posts/1-structure.tsx","posts/2-database.tsx","posts/3-entities.tsx","posts/4-repositories.tsx","posts/5-router.tsx","posts/6-validations.tsx","posts/7-services.tsx","posts/8-controllers.tsx","posts/9-body-parser.tsx","lib/components/sidebar/sidebar.tsx","app/pages/tutorial/tutorial.tsx","services/ChallengeService.ts","lib/components/feedbackModal/feedbackModal.tsx","app/pages/challenges/challenges.tsx","app/pages/register/register.tsx","app/config/routing.tsx","lib/components/route/route.tsx","lib/components/main/main.tsx","app/pages/layout.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","token_key","loggedIn","getToken","localStorage","getItem","UserDropdown","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","react_default","a","createElement","Fragment","className","id","data-toggle","aria-haspopup","aria-expanded","username","aria-labelledby","react_router_dom","to","Component","Header","_React$Component","_this","state","isLogged","authGuard","inherits","createClass","key","value","items","filter","i","onlyGuest","map","item","href","title","user_dropdown_UserDropdown","profileImage","Navbar_default","bg","variant","src","width","height","alt","Nav_default","_renderNavItems","_renderUserPanel","React","Footer","apply","arguments","Container_default","fluid","style","minHeight","Content","markdown","Row_default","Col","children","_checkStatus","_x","_checkStatus2","_callee","response","res","error","regenerator_default","wrap","_context","prev","next","status","abrupt","json","sent","Error","message","stop","ApiService","_fetch","fetch","_x2","toString","url","options","headers","Accept","Content-Type","objectSpread","then","api","AuthService","domain","process","password","method","body","JSON","stringify","email","token","setItem","removeItem","Loading","_Component","show","Fade","in","position","top","left","backgroundColor","display","zIndex","es_Container","role","auth","Login","touched","isLoading","_onChange","bind","assertThisInitialized","_handleSubmit","e","_objectSpread2","setState","defineProperty","target","field","validationResult","info","schema","joi","required","label","min","max","stripUnknown","validateLogin","marginTop","fontSize","color","details","d","index","_this2","asyncToGenerator","mark","login","history","push","catch","err","console","log","_this3","Col_default","Form_default","Group","Control","onBlur","_handleBlur","type","placeholder","onChange","_renderServerErrors","_renderValidationErrors","Button_default","onClick","loading_Loading","userService","UserService","newUser","attUpdate","Signup","f_name","l_name","confirmPassword","isRegistered","validated","err_form","_handleChange","data","validate","user","valid","language","any","allowOnly","validateUser","detail","context","create","_this$state","isInvalid","Feedback","_renderFormError","disabled","Hero","innerWidth","Card_default","Section","sectionCss","bgColor","noGutters","Home","hero_Hero","login_Login","section_Section","Image_default","roundedCircle","typescript","require","bash","jsonLanguage","shell","hljs","registerLanguage","configure","languages","CodeBlock","_React$PureComponent","current","ReactDOM","findDOMNode","highlightBlock","PureComponent","PATHS","introduction","BASE_PATH","structure","database","entities","repositories","router","validations","services","controllers","bodyParser","postsRoutes","isIndex","path","post","codeBlock_CodeBlock","Sidebar","_handleListClick","listItems","actualPath","Tutorial","sidebar_Sidebar","pathname","md","react_router","exact","render","content_Content","ChallengeService","challengeAns","concat","FeedbackModal","modalIconCSS","feedback","failures","results","Modal","assign","size","centered","_renderFeedBack","_renderResults","es_Button","onHide","challService","Challenges","level","description","sampleAnswer","challengesList","fbModalShow","pageLoading","challengeId","reload","split","dangerouslySetInnerHTML","__html","feedbackModal_FeedbackModal","test","params","errSubStr","errMsg","length","_this4","_callee2","_context2","get","getAll","list","sort","b","nextProps","prevState","_loadChallengeData","_this$state2","_renderSidebar","_renderChallengeDescription","controlId","Label","as","rows","_renderFBModal","Register","signup_Signup","HREF","routes","component","home_Home","displayInNavBar","tutorial_Tutorial","challenges_Challenges","isProtected","register_Register","Route","_this$props","rest","objectWithoutProperties","cloneElement","from","Main","esm_extends","route_Route","Layout","HeaderM","withRouter","_ref","header_Header","main_Main","footer_Footer","layout","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7e125834.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import jwt from 'jsonwebtoken';\n\nconst token_key = 'reddit_clone_token';\n\nconst AUTH_SECRET = 'asdfg;lkjh';\nexport function loggedIn(){\n    const token = getToken();\n    return !!token;\n}\nexport function setToken(token:any){\n    localStorage.setItem(token_key, token)\n}\nexport function getToken(){\n    const token = localStorage.getItem(token_key)\n    return token;\n}\nexport function removeToken(){\n    localStorage.removeItem(token_key);\n}\ninterface Decoded{\n    id: number\n}\n\nexport function getLoggedUser(){\n    let token = getToken()\n    let user = {id: undefined}\n    if (token){\n        return jwt.verify(token, AUTH_SECRET, (err,decoded)=>{\n            if (err) {\n                throw new Error()\n              } else {\n                    Object.assign(user, decoded)\n                    return user.id\n              }\n        })\n    } \n    return null;\n}\n\n","import React, { Component } from 'react'\nimport './user-dropdown.css'\nimport { Link } from 'react-router-dom';\n\ninterface Props {\n  username: string;\n  profileImage: string;\n}\n\nexport default class UserDropdown extends Component<Props> {\n\n  constructor(props: Props) {\n    super(props);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <ul className=\"navbar-nav\">\n          <li className=\"nav-item dropdown\">\n            <button\n              className=\"dropdown-toggle btn btn-outline-secondary user-drop\"\n              id=\"navbarDropdown\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n            >\n              {this.props.username}\n            </button>\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n              <Link className=\"dropdown-item items\" to='/user/user_details'>\n                <i className=\"far fa-lg fa-user m-2 text-secondary\"></i>\n                <span className='m-2'>Profile</span>\n              </Link>\n              <Link className=\"dropdown-item items\" to={'/'}>\n                <i className=\"fas fa-lg fa-sign-out-alt m-2 text-secondary\"></i>\n                <span className='m-2'>Logout</span>\n              </Link>\n            </div>\n          </li>\n        </ul>\n      </React.Fragment>\n    )\n  }\n}","import React from 'react';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport { Link } from 'react-router-dom';\nimport * as authGuard from '../../../helpers/authGuard';\nimport { LoggedPanel } from '../loggedPanel/loggedPanel';\nimport { Container } from 'react-bootstrap';\nimport UserDropdown from '../user-dropdown/user-dropdown';\n\ninterface NavbarItem {\n    isIndex?: boolean;\n    title: string;\n    href: string;\n    onlyGuest: boolean;\n}\n\ninterface HeaderProps{\n    items:NavbarItem []\n    history?:any\n}\n\ninterface HeaderState{\n    isLogged:boolean;\n}\n\nexport class Header extends React.Component<HeaderProps, HeaderState>{\n    public constructor(props: HeaderProps) {\n        super(props);\n            this.state = {isLogged:authGuard.loggedIn()}\n        };\n    private _renderNavItems(items:NavbarItem[]){\n        if(authGuard.loggedIn()){\n            return (\n                items.filter((i:NavbarItem) => i.onlyGuest !== true).map((item, key) => {\n                    return (\n                        <Link className=\"nav-link\" to={item.href} key={key} >\n                            {item.title}\n                        </Link>\n                    );\n                })\n            )\n        }else{\n            return (\n                items.map((item, key) => {\n                    return (\n                        <Link className=\"nav-link\" to={item.href} key={key} >\n                            {item.title}\n                        </Link>\n                    );\n                })\n            )\n        }\n\n        \n    }\n    private _renderUserPanel(){\n        if(authGuard.loggedIn()){\n            return <UserDropdown username=\"username\" profileImage=\"image\" />\n        }\n        return <div></div>\n    }\n    render(){\n        return (\n\n            <Navbar bg=\"dark\" variant=\"dark\" className=\"sticky-top bg-winter\">\n                <Link className=\"\" to=\"/\" ><img\n                    src=\"/images/logo2.png\"\n                    width=\"125\"\n                    height=\"50\"\n                    className=\"d-inline-block align-top\"\n                    alt=\"React Bootstrap logo\"/>\n                </Link>\n                <Nav className=\"ml-auto\">\n                    {this._renderNavItems(this.props.items)}\n                </Nav>{this._renderUserPanel()}\n               \n            </Navbar>\n        )\n        \n    }\n\n}","import React from 'react';\nimport Container from 'react-bootstrap/Container';\n\nexport class Footer extends React.Component{\n    render(){\n        return (\n            <Container fluid className=\"bg-secondary\" style={{minHeight:\"200px\"}}>\n            </Container>\n        )\n    }\n\n}","import React from \"react\";\nimport { withRouter, RouteProps } from \"react-router-dom\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport { Col } from \"react-bootstrap\";\n\n\ninterface ContentProps  {\n  className?:string;\n}\n\ninterface ContentState {\n}\n\nexport class Content extends React.Component<ContentProps, ContentState> {\n  public constructor(props: ContentProps) {\n    super(props);\n    this.state = {\n      markdown: null\n    };\n  }\n  public render() {\n      return <Container className={(this.props.className ? this.props.className: \"\")} fluid>\n\n        <Row className=\"px-4\">\n        <Col> \n        {this.props.children}\n        </Col>\n         \n        </Row>\n        \n      </Container>;\n  }\n}","export async function _checkStatus(response:any){\n    if(response.status >= 200 && response.status < 300){\n        return response;\n    } else {\n        let res = await response.json()\n        let error = new Error(res['Error']);\n        error.message = res['Error'];\n        throw error;\n    }\n}","import * as authGuard from './authGuard';\nimport * as message from './messagesHelper';\n\nexport class ApiService {\n    \n    fetch (url:string, options:any):any {\n        let headers:any= {};\n        // if content type is not defined\n        if(!options['Content-Type']){\n            headers = {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n            }\n        }\n        if(authGuard.loggedIn()){\n            headers['x-auth-token'] = authGuard.getToken();\n        }\n        return fetch(url,{\n            ...options,\n            headers\n        })\n        .then(message._checkStatus)\n        .then((response:any) => response.json())\n\n    }\n}","import * as authGuard from '../helpers/authGuard'\nimport {ApiService} from '../helpers/api'\n\nconst api = new ApiService;\n\nexport class AuthService {\n    domain:string\n    constructor(domain?:string){\n        this.domain = domain || process.env.REACT_APP_API + '/auth/login'\n    }\n\n    public login(username:any, password:any){\n        return api.fetch(this.domain,{\n                method:'POST',\n                body:JSON.stringify({\n                    email: username,\n                    password: password\n                })\n            })\n            .then((response:any) => {\n                authGuard.setToken(response.token)\n                return response;})  \n        \n        \n    }\n    public logout(){\n        authGuard.removeToken();\n    }\n\n\n}","import React, {Component, CSSProperties} from \"react\";\nimport { Col, Container, Fade } from \"react-bootstrap\";\nimport { Row } from \"react-bootstrap\";\n\ninterface Props {\n    show:boolean;\n}\nexport class Loading extends Component<Props,{}> {\n    render() {\n        const bgShadow:CSSProperties = {\n            position: \"fixed\",\n            width: \"100%\",\n            top:\"0\",\n            left:\"0\",\n            height: \"100%\",\n            backgroundColor: \"rgba(0,0,0,.40)\",\n            display: \"flex\",\n            zIndex: 1500,\n            \n    \n        };\n        const { show } = this.props;\n\n        return (\n            <Fade in={show}>\n                <div className={\"text-white\" + (show ? \"\" : \" d-none\" )} style={bgShadow}>\n                <Container fluid className=\"text-center align-self-center\" >\n                        <h3>Loading...</h3>\n                        <div className=\"spinner-grow\" style={{width: \"6rem\", height: \"6rem\"}} role=\"status\">\n                            <span className=\"sr-only\">Loading...</span>\n                        </div>\n                </Container>\n                    \n                </div>\n            </Fade>\n            \n        );\n    }\n}","import React from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Form from 'react-bootstrap/Form';\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport { Link } from 'react-router-dom';\nimport { validateLogin } from \"../../../validation/userValidation\";\nimport { AuthService } from \"../../../services/AuthService\";\nimport { Loading } from \"../loading/loading\";\ninterface LoginProps {\n    history: any;\n}\n\ninterface LoginState {\n    email: string;\n    password: string;\n    error: string | null;\n    touched: {\n        email: boolean,\n        password: boolean\n      }\n    isLoading: boolean;\n}\nconst auth:AuthService = new AuthService;\nexport class Login extends React.Component<LoginProps,LoginState> {\n    public constructor(props: LoginProps) {\n        super(props);\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            touched: {\n                email: false,\n                password: false\n              },\n            isLoading: false\n        };\n        this._onChange = this._onChange.bind(this)\n        this._handleSubmit = this._handleSubmit.bind(this)\n    }\n\n    private _onChange(e:any) {\n        this.setState({ ...this.state, [e.target.id]:e.target.value, error:null })\n    }\n    private _handleBlur(field:any){\n        this.setState({\n          touched: { ...this.state.touched, [field]: true }\n        });\n      }\n    private _renderValidationErrors() {\n        const validationResult = validateLogin({\n            email: this.state.email,\n            password: this.state.password\n        });\n        if (!!validationResult.error && (this.state.touched.email || this.state.touched.email)) {\n            return <div className=\"text-center\" style={{\n                width: \"100%\",\n                marginTop: \"0.25rem\",\n                fontSize: \"80%\",\n                color: \"#dc3545\"}}>\n                    {validationResult.error.details.map((d:any, index:any) => <div key={index}>{d.message}\n                </div>)}\n            </div>;\n        } else {\n            return <div></div>;\n        }\n    }\n    private _renderServerErrors() {\n        if (!!this.state.error) {\n            return <div className=\"text-center\" style={{\n                width: \"100%\",\n                marginTop: \"0.25rem\",\n                fontSize: \"80%\",\n                color: \"#dc3545\"}}>{this.state.error}</div>;\n        } else {\n            return <div></div>;\n        }\n    }\n    private _handleSubmit(){\n        this.setState({ isLoading: true });\n        (async () => {\n            await auth.login(this.state.email, this.state.password)\n                .then((res:any) => {\n                    this.setState({ error: null });\n                    this.props.history.push(\"/challenges/1\");\n                })\n                .catch((err:any) => {\n                    console.log(err)\n                    this.setState({ error: err.message });\n                })\n            this.setState({ isLoading: false })\n        })();\n    }\n    public render() {\n        const { isLoading } = this.state;\n        return (\n            <Row className=\"align-items-center h-100 pr-4\">\n                <Col>\n                    <h1>Sign in</h1>\n                    <Form className=\"my-3\">\n                        <Form.Group>\n                            <Form.Control\n                                onBlur={()=>this._handleBlur('email')}\n                                type=\"email\"\n                                id=\"email\"\n                                placeholder=\"name@example.com\" \n                                value={this.state.email} \n                                onChange={this._onChange}\n                            />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Control \n                                onBlur={()=>this._handleBlur('email')}\n                                type=\"PASSWORD\" \n                                id=\"password\"\n                                value={this.state.password} \n                                onChange={this._onChange}\n                            />\n                        </Form.Group>\n                        {this._renderServerErrors()}\n                        {this._renderValidationErrors()}\n                        <Button style={{width:'155px'}}\n                            type=\"button\" \n                            onClick={this._handleSubmit}\n                        >LOGIN</Button>\n                        <h6 className=\"mt-5 text-center\">Don't have an account? <Link to=\"/register\">Register here</Link></h6>\n\n                    </Form>\n                    <Loading show={isLoading}/>\n                </Col>\n            </Row>\n        );\n    }\n}","import * as joi from 'joi';\n\nexport function validateUser(user: any) {\n  const schema = joi.object({\n    f_name: joi.string().min(3).required().label(\"First Name\"),\n    l_name: joi.string().min(3).required().label(\"Last Name\"),\n    email: joi.string().email().required().label(\"Email\"),\n    password: joi.string().min(6).max(12).required().label(\"Password\"),\n    confirmPassword: joi.string().required().valid(joi.ref('password')).label(\"Confirm Password\").options({\n      language: {\n        any: {\n          allowOnly: '!! \"Password\" and \"Confirm Password\" do not match',\n        }\n      } \n    })\n\n    // The strip unknown options removes unknown elements from \n    // objects and arrays, blocking their inclusion in the database \n  }).options({ stripUnknown: true });\n\n  return joi.validate(user, schema);\n}\n\n\nexport function validateLogin(info: any) {\n  const schema = joi.object({\n    email: joi.string().email().required().label(\"Email\"),\n    password: joi.string().min(6).max(12).required().label(\"Password\"),\n  }).options({ stripUnknown: true });\n\n  return joi.validate(info, schema);\n}\n","import {ApiService} from '../helpers/api'\nimport {getLoggedUser} from '../helpers/authGuard'\n\nconst api  = new ApiService;\n\nexport class UserService {\n    domain:string\n    constructor(domain?:string){\n        this.domain = domain || process.env.REACT_APP_API + '/users'\n    }\n\n    public getAll(){\n        return api.fetch(this.domain,{\n            method:'GET'})\n            .then((res:any) => {return res})\n    }\n    public get(id:number){\n        return api.fetch(this.domain+'/'+id,{\n            method:'GET'})\n            .then((res:any) => {return res})\n    }\n\n    public create(newUser:any){\n        return api.fetch(this.domain,{\n            method:'POST',\n            body: JSON.stringify(newUser)\n        })\n        .then((res:any) => {return res})\n    }\n    public update(id:number, attUpdate:any){\n        return api.fetch(this.domain+'/'+id,{\n            method:'PATCH',\n            body: JSON.stringify(attUpdate)\n        })\n        .then((res:any) => {return res})\n    }\n    public delete(id:number){\n        return api.fetch(this.domain+'/'+id,{\n            method:'DELETE',\n        })\n        .then((res:any) => {return res})\n    }\n\n\n}","import React from \"react\";\nimport * as H from 'history';\nimport Row from \"react-bootstrap/Row\";\nimport Form from 'react-bootstrap/Form';\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport { Link, Redirect } from 'react-router-dom';\nimport { UserService } from \"../../../services/UserService\";\nimport { validateUser } from \"../../../validation/userValidation\";\nimport { Loading } from \"../loading/loading\";\ninterface SignupProps {\n    history:any;\n    // location: string;\n}\n\ninterface SignupState {\n    email:string;\n    password:string;\n    f_name:string;\n    l_name:string;\n    confirmPassword:string;\n    err_form: string | null;\n    isRegistered: boolean;\n    validated:boolean;\n    err: {\n        email:string | null,\n        password:string | null,\n        f_name:string | null,\n        l_name:string | null,\n        confirmPassword:string | null\n    };\n    isLoading: boolean;\n}\nconst userService = new UserService;\nexport class Signup extends React.Component<SignupProps,SignupState> {\n    public constructor(props:SignupProps) {\n        super(props);\n       this.state ={\n            email:\"\",\n            password:\"\",\n            f_name:\"\",\n            l_name:\"\",\n            confirmPassword:\"\",\n            isRegistered:false,\n            validated:false,\n            err_form: null,\n            err: {\n                f_name: null,\n                l_name: null,\n                email: null,\n                password: null,\n                confirmPassword:null\n            },\n            isLoading: false\n       }\n\n    this._handleChange = this._handleChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n\n    }\n    private _handleChange(e:any) {\n        let data:any = this.state;\n        data[e.target.id] = e.target.value;\n        let state = this.validate(data)\n        this.setState(state)\n    }\n    private validate(data:any){\n        data.err_form=null;\n        data.err={\n            f_name: null,\n            l_name: null,\n            email: null,\n            password: null,\n            confirmPassword:null\n        }\n        let validated = validateUser(data)\n        if (!!validated.error){\n            \n            let detail = validated.error.details[0]\n            let { key }:any = detail.context;\n            data.err[key] = detail.message;\n            data.validated=false;\n        }else{\n\n            data.validated=true;\n        }\n        return data\n    }\n    private _renderFormError(){\n        if(!!this.state.err_form ){\n            return <div className=\"text-center\" style={{\n                width: \"100%\",\n                marginTop: \"0.25rem\",\n                fontSize: \"80%\",\n                color: \"#dc3545\"}}>{this.state.err_form}</div>;\n        } else {\n            return <span></span>;\n            \n        }\n    }\n    private _handleSubmit(){\n        this.setState({ isLoading: true });\n        (async()=>{\n            await userService.create({\n                email: this.state.email,\n                password: this.state.password,\n                f_name: this.state.f_name,\n                l_name: this.state.l_name\n            }).then((res:any) => {\n                this.setState({isRegistered:true});\n            })\n            .catch((err:any) => {\n                this.setState({err_form:err.message})\n            });\n            this.setState({ isLoading: false })\n        })()\n    }\n\n    public render() {\n        let { validated, isLoading} = this.state\n        if(this.state.isRegistered){\n            return(<Row className=\"h-100 pr-4 align-items-center\">\n                <Col className=\"text-center\">\n                <h2>Thank you!!!</h2>\n                <h5>Know you are all set! <Link to=\"/login\">Login</Link> and start your first challenge now!</h5>\n                \n                </Col>\n            </Row>)\n        }\n        return (\n            <Row className=\"h-100 pr-4\">\n                <Col className=\"py-4\"><h1>Sign Up</h1>\n                <Form className=\"my-3\" >\n                    <Form.Group>\n                    <Form.Control\n                            type=\"text\"\n                            id=\"f_name\"\n                            placeholder=\"First Name\" \n                            value={this.state.f_name}\n                            onChange={this._handleChange}\n                            isInvalid={!!this.state.err.f_name}\n                        />\n                    <Form.Control.Feedback type=\"invalid\">\n                        {this.state.err.f_name}\n                    </Form.Control.Feedback>\n                    </Form.Group >\n                    <Form.Group>\n                        <Form.Control\n                                type=\"text\"\n                                id=\"l_name\"\n                                placeholder=\"Last Name\" \n                                value={this.state.l_name} \n                                onChange={this._handleChange}\n                                isInvalid={!!this.state.err.l_name}\n                                />\n                            <Form.Control.Feedback type=\"invalid\">\n                                {this.state.err.l_name}\n                            </Form.Control.Feedback>\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Control\n                            type=\"email\"\n                            id=\"email\"\n                            placeholder=\"name@example.com\" \n                            value={this.state.email} \n                            onChange={this._handleChange}\n                            isInvalid={!!this.state.err.email}\n                        />\n                    <Form.Control.Feedback type=\"invalid\">\n                        {this.state.err.email}\n                    </Form.Control.Feedback>\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Control \n                            type=\"PASSWORD\" \n                            id=\"password\"\n                            placeholder=\"Password\" \n                            value={this.state.password} \n                            onChange={this._handleChange}\n                            isInvalid={!!this.state.err.password}\n                        />\n                    <Form.Control.Feedback type=\"invalid\">\n                        {this.state.err.password}\n                    </Form.Control.Feedback>\n                    </Form.Group>\n                    <Form.Group style={{height:\"60px\"}} className=\"mb-1\">\n                        <Form.Control \n                            type=\"PASSWORD\" \n                            id=\"confirmPassword\"\n                            placeholder=\"Confirm Password\"\n                            \n                            onChange={this._handleChange}\n                            isInvalid={!!this.state.err.confirmPassword}\n                        />\n                    <Form.Control.Feedback type=\"invalid\">\n                        {this.state.err.confirmPassword}\n                    </Form.Control.Feedback>\n                    </Form.Group>\n                    {this._renderFormError()}\n                    <Button style={{width:'155px'}}\n                        disabled={!validated}\n                        type=\"button\" \n                        onClick={this._handleSubmit}\n                    >SIGN UP</Button>\n                   \n                    <h6 className=\"mt-5 text-center\">Already has an account? <Link to=\"/login\">Login</Link></h6>\n\n                </Form>\n                <Loading show={isLoading}/>\n                </Col>\n            </Row>\n        );\n    }\n}","import React from 'react';\nimport './hero.css'\nimport Card from 'react-bootstrap/Card';\nimport {Login} from '../';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nexport class Hero extends React.Component{\n    render(){\n        return(\n            <Container fluid className=\"pb-5 px-0 position-relative\">\n                <div id=\"moon\" className=\"bg-winter d-flex\"></div>\n                <Container fluid={ window.innerWidth < 992 ? true : false}>\n                    <Card style={{zIndex:1}}>\n                    <Row>\n                        <Col><img className=\"m-auto d-block img-fluid\" src=\"/images/marble.png\" alt=\"\"/></Col>\n                        <Col>                           \n                            {this.props.children}\n                        </Col>                    \n                    </Row>\n                    </Card>\n                </Container>\n                \n            </Container>  \n            \n        )\n    }\n}","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\ninterface SectionProps{\n    bgColor?: string;\n    noGutters?: boolean;\n}\nexport class Section extends React.Component<SectionProps>{\n    constructor(props:SectionProps){\n        super(props)\n    }\n    render(){\n        const color:string = (this.props as any).bgColor;\n        const sectionCss: React.CSSProperties={\n            backgroundColor: color ,\n        }\n\n        return(\n            <Container fluid style={sectionCss} className=\"d-flex \">\n                <Container className=\"d-flex py-5 border-bottom border-primary\">\n                    <Row className={\"m-auto\" + (this.props.noGutters? ' no-gutter': '')}>\n                        {this.props.children}\n                    </Row>\n                </Container>\n            </Container>\n            \n        )\n    }\n}","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Image from 'react-bootstrap/Image';\nimport { Hero } from '../../../lib/components/hero/hero';\nimport { Section } from '../../../lib/components/section/section';\nimport Col from 'react-bootstrap/Col';\nimport { Login } from '../../../lib/components';\n\nexport class Home extends React.Component{\n    render(){\n\n        const {history}:any = this.props;\n        return (\n            <Container fluid className=\"bg-light px-0\">\n                <Hero><Login history={history}/></Hero>\n                <Container fluid >\n                    <Section>\n                        <Col>\n                        <h3 >Lorem Ipsum</h3>\n                        <p>\n                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\n                        </p>\n                        </Col>\n                        <Col>\n                        <h3 >Lorem Ipsum</h3>\n                        <p>\n                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\n                        </p>\n                        </Col>\n                        <Col>\n                        <h3 >Lorem Ipsum</h3>\n                        <p>\n                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\n                        </p>\n                        </Col>\n                    </Section>\n                    <Section noGutters>\n                        <Col className=\"text-center\">\n                        <h2 >Lorem Ipsum</h2>\n                        <p>\n                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\n                        </p>\n                        </Col>\n                    </Section>\n                    <Section>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Fernando Marinho</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\" />\n                            <h3>Gustavo Lessa</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Lucival</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Rafael Barros</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                    </Section>\n                </Container>\n            </Container>\n        )\n    }\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/tomorrow-night.css';\nimport './codeBlock.css'\n\nvar typescript = require(\"highlight.js/lib/languages/typescript\");\nvar bash = require(\"highlight.js/lib/languages/bash\");\nvar jsonLanguage = require(\"highlight.js/lib/languages/json\");\nvar shell = require(\"highlight.js/lib/languages/shell\");\n\nhljs.registerLanguage('ts', typescript)\nhljs.registerLanguage('bash', bash)\nhljs.registerLanguage('json', jsonLanguage)\nhljs.registerLanguage('shell', shell)\nhljs.configure({\n  languages: ['ts', 'shell', 'bash', 'json']\n})\nexport class CodeBlock extends React.PureComponent {\n\n  componentDidMount(){\n    let current = ReactDOM.findDOMNode(this)\n    hljs.highlightBlock(current as Node)\n  }\n\n  render() {\n    let { children } = this.props\n    return (\n      <pre className=\"rounded-lg py-3 px-4 mx-n4 mb-4\">\n        <code >\n          {children}\n        </code>\n      </pre>\n    )\n  }\n}","import { RouteComponentProps } from \"react-router-dom\";\nimport { Home } from \"../pages/home/home\";\nimport { Tutorial } from \"../pages/tutorial/tutorial\";\nimport * as post from '../../posts/index';\n\ninterface RouteConf {\n    isIndex?: boolean;\n    displayInNavBar?: boolean;\n    title: string;\n    path: string;\n    post?: any;\n}\nconst BASE_PATH = '/tutorial'\nconst FILES_PATH = '/posts/'\n\n\nexport const PATHS = {\n    introduction: BASE_PATH + '/',\n    structure: BASE_PATH + '/structure',\n    database: BASE_PATH + \"/database\",\n    entities: BASE_PATH + \"/entities\",\n    repositories: BASE_PATH + \"/repositories\",\n    router: BASE_PATH + \"/router\",\n    validations: BASE_PATH + \"/validations\",\n    services: BASE_PATH + \"/services\",\n    controllers: BASE_PATH + \"/controllers\",\n    bodyParser: BASE_PATH + \"/body-parser\",\n}\n\nexport const postsRoutes: RouteConf[] = [\n    { isIndex: true, title: 'Introduction', path: PATHS.introduction, post: post.introduction },\n    { isIndex: true, title: 'Setting Up the Project', path: PATHS.structure, post: post.structure },\n    { isIndex: false, title: 'Database Configuration', path: PATHS.database, post: post.database },\n    { isIndex: false, title: 'Creating the Entity Classes', path: PATHS.entities, post: post.entities },\n    { isIndex: false, title: 'Creating the Repositories', path: PATHS.repositories, post: post.repositories },\n    { isIndex: false, title: 'Routes and App Router', path: PATHS.router, post: post.router },\n    { isIndex: false, title: 'Implementing validation', path: PATHS.validations, post: post.validations },\n    { isIndex: false, title: 'Creating the Services', path: PATHS.services, post: post.services },\n    { isIndex: false, title: 'Creating the Controllers', path: PATHS.controllers, post: post.controllers },\n    { isIndex: false, title: ' Implementing Body Parser', path: PATHS.bodyParser, post: post.bodyParser },\n]","import React from 'react';\nimport Col from 'react-bootstrap/Col';\n\nexport function introduction(props?:any) {\n    return <Col>\n        <h2>\n            Introduction\n        </h2>\n\n        <p>\n        A Basic tutorial on how to build an API in node.js using TypeScript, express, TypeORM and MySQL Database.\n        </p>\n        <p className=\"lead\">\n        Prerequisites\n        </p>\n        <ul>\n            <li><a href=\"https://nodejs.org\">Node.js</a></li>\n            <li><a href=\"https://gitforwindows.org/\">Git Bash</a> (for windows users)</li>\n            <li><a href=\"https://dev.mysql.com/doc/mysql-installation-excerpt/5.7/en/\">MySQL 5.7 Database</a></li>\n        </ul>\n        <p className=\"lead\">\n            Scenario\n        </p>\n        <p>\n        In this tutorial we are going to build a simple blog where users will have roles, profile images and can create articles.\n        </p>\n        \n        <p className=\"lead\"> Database Schema</p>\n\n        <img src='/images/databaseSchema.png' width='100%' />\n\n\n    </Col>;\n  }\n\n","import React from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\n\nexport function structure(props?:any) {\n    return (\n      <Col>\n      <h2>Setting Up the Project</h2>\n      <p>\n        Create a new folder called <code>my-project</code> and inside it type $<code>npm init</code>.\n        This will fire some questions that you can setup:\n      </p>\n\n      <CodeBlock>\n        {`npm init \n          \npackage name: (javascript) my-project\nversion: (1.0.0) 0.1.0\ndescription: Fubeca API Tutorial\nentry point: (index.js) app.ts\ntest command: \ngit repository: \nkeywords: \nauthor: Marble Tech\nlicense: (ISC) \nAbout to write to /home/rbsrafa/projects/javascript/package.json:\n\n{\n  \"name\": \"my-project\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Fubeca API Tutorial\",\n  \"main\": \"app.ts\",\n  \"scripts\": {'{'}\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"Marble Tech\",\n  \"license\": \"ISC\"\n}\n\n\nIs this OK? (yes) y`}\n      </CodeBlock>\n          \n      \n      <p>By chosing yes a <code>package.json</code> file will be created for you. Now you need to install all the dependencies of the project with the command:</p>\n      <CodeBlock>\n        {'$ npm install --save body-parser chai express joi mocha nyc mysql2 reflect-metadata supertest ts-node typeorm typescript nodemon dotenv multer @types/body-parser @types/chai @types/express @types/joi @types/mocha @types/node @types/node @types/supertest @types/dotenv @types/multer'}\n      </CodeBlock>\n      <p>\n        This command will create a <code>node_modules</code> folder and place all the dependencies inside it. It also creates a <code>package-lock.json</code> file for you.\n        Once npm finishes the installation type <code>tsc --init</code> it will create a file called <code>tsconfig.json</code>, this file is responsible for the typescript configuration.\n        We need to set the following configurations in <code>tsconfig.json</code>:\n      </p>\n      <CodeBlock>\n        {`{\n\"compilerOptions\": {\n    /* Basic Options */\n    \"target\": \"es5\",\n    \"module\": \"commonjs\",\n    \"lib\": [\"es6\", \"dom\"],\n    \n    /* Strict Type-Checking Options */\n    \"strict\": true,\n    \"esModuleInterop\": true,\n\n    /* Experimental Options */\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true,\n    }\n}`}\n      </CodeBlock>\n\n      <p>\n      Create a file named <code>nodemon.json</code> and add these lines of code:\n      </p>\n      <CodeBlock>\n{`{\n  \"watch\": [\"src\", \"tsconfig.json\"],\n  \"ext\": \"ts\",\n  \"ignore\": [\"src/**/*.spec.ts\"],\n  \"exec\": \"ts-node ./src/server/server.ts\"\n}`}\n      </CodeBlock>\n      <p>\n      We will use the <code>dotenv</code> library to read the system environment variables without having to set them in our local machine. To do it create a file called <code>.env</code> in the root folder <code>my-project</code>. We are going to create the environment inside this file and read their values in our application. Please <strong>DO NOT FORGET</strong> to change the values in <code>DATABASE_USER</code> and <code>DATABASE_PASSWORD</code> to match your database settings:\n      </p>\n      <CodeBlock>\n        {`//my-project/.env\n\n# SERVER\nSERVER_PORT=3000\n\n# DATABASE\nDATABASE_HOST=\"localhost\"\nDATABASE_USER=\"user\"\nDATABASE_PASSWORD=\"password\"\nDATABASE_DB=\"my_project\"`}\n      </CodeBlock>\n      \n      <p>\n      Create a folder named <code>src</code>. Inside the <code>src</code> folder create 2 other folders: <code>client</code> and <code>server</code>.\n\n      Inside the <code>server</code> folder create 2 files: <code>app.ts</code> and <code>server.ts</code>.\n\n      At this point your project structure should look like this:\n      </p>\n      <img src='./images/initialFolderStructure.png' width='100%' />\n      <p>\n      To test if everything is working we first need to modify the <code>package.json</code> file a little bit. Open it and add the \"start\" script inside the object \"scripts\":      \n      </p>\n      <CodeBlock>\n{`{\n  \"name\": \"my-project\",\n  \"version\": \"0.1.0\",\n  \"description\": \"\",\n  \"main\": \"app.ts\",\n  \"scripts\": {\n    \"start\":\"nodemon\", // insert this line\n    \"test\": \"echo 'Error: no test specified' && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@types/body-parser\": \"^1.17.0\",\n    \"@types/chai\": \"^4.1.7\",\n    \"@types/dotenv\": \"^6.1.0\",\n    \"@types/express\": \"^4.16.1\",\n    \"@types/joi\": \"^14.3.2\",\n    \"@types/mocha\": \"^5.2.6\",\n    \"@types/node\": \"^11.9.5\",\n    \"@types/supertest\": \"^2.0.7\",\n    \"body-parser\": \"^1.18.3\",\n    \"chai\": \"^4.2.0\",\n    \"dotenv\": \"^6.2.0\",\n    \"express\": \"^4.16.4\",\n    \"joi\": \"^14.3.1\",\n    \"mocha\": \"^6.0.2\",\n    \"mysql2\": \"^1.6.5\",\n    \"nodemon\": \"^1.18.10\",\n    \"nyc\": \"^13.3.0\",\n    \"reflect-metadata\": \"^0.1.13\",\n    \"supertest\": \"^3.4.2\",\n    \"ts-node\": \"^8.0.2\",\n    \"typeorm\": \"^0.2.14\",\n    \"typescript\": \"^3.3.3333\"\n  }\n}`}\n      </CodeBlock>\n      <p>\n      This change allows for running the application typing <code>npm start</code> in the terminal.\n      Finally change the code inside the <code>app.ts</code> and <code>server.ts</code> respectively:\n      </p>\n      <CodeBlock>\n      {`//my-project/src/server/app.ts\n\nimport express from 'express';\n\nexport async function createApp() {\n\n    // Create express application\n    const app = express();\n\n    // Add the root route '/' to application\n    app.get('/', (req, res) => {\n      res.send(\"<h2>It\\'s working</h2>\");\n    });\n\nreturn app;\n}`}\n      </CodeBlock>\n\n      <CodeBlock>\n        {`//my-project/src/server/server.ts\n\nimport dotenv from 'dotenv';\n// Get Environment Variables from .env file\ndotenv.config();\nimport { createApp } from \"./app\";\n\n(async () => {\n\n    // Create the express application\n    const app = await createApp();\n\n    // Get the port number from the Environment Variable\n    const port = process.env.SERVER_PORT; \n\n    // Start the server\n    app.listen(port, () => {\n        console.log(\n            \\`The server is running on port \\${port}!\\`\n        );\n    });\n\n})();\n`}\n      </CodeBlock>\n\n      <p>\n      On your terminal type the command:\n      </p>\n      <CodeBlock>\n        {'npm start'}\n      </CodeBlock>\n\n      <p>\n        Nodemon will be watching for any changes in the entire project and will automatically reload it for us. We only have to save the changed files and see the magic happen.\n        Open your browser of preference and type <code>localhost:3000</code>.\n        You should then see the message `It's working` on it. If for some reason this port is already in use a error message will be shown in your terminal, to solve this problem you can just change the port number in the server.ts file or turn off your other application that is using this port. \n      </p>\n\n      <img src='/images/itIsWorking.png' width='100%' />\n      </Col>\n    )\n}\n","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function database(props?:any) {\n    return <Col>\n\n        <h2>Database Configuration</h2>\n\n        <p>To link your application with the MySQL Database you'll need to follow a few steps:\n        </p>\n        <p className=\"lead\">\n        Create the MySQL database\n        </p> \n        <p>Create a new database called <code>my_project</code> using a MySQL database manager or type the following command in mysql shell:\n        </p>\n        <CodeBlock>\n          {'mysql> create database my_project;'}\n        </CodeBlock>\n        <p>\n        Inside the <code>server</code> folder create a new folder called <code>config</code> and add a new file named <code>db.ts</code>.\n        </p>\n        <CodeBlock>\n          {`//my-project/src/server/config/db.ts\nimport { createConnection, getConnectionManager } from \"typeorm\";\n\nexport async function createDbConnection() {\n\n  // Set database variables from environment\n  const DATABASE_HOST = process.env.DATABASE_HOST;\n  const DATABASE_PASSWORD = process.env.DATABASE_PASSWORD;\n  const DATABASE_USER = process.env.DATABASE_USER;\n  const DATABASE_DB = process.env.DATABASE_DB;\n\n  // Create a database connection\n  await createConnection({\n    type: \"mysql\",\n    host: DATABASE_HOST,\n    port: 3306,\n    username: DATABASE_USER,\n    password: DATABASE_PASSWORD,\n    database: DATABASE_DB,\n    entities: [],\n    synchronize: true\n  });\n\n  // Check if connection is successful\n  const connection = getConnectionManager();\n  console.log('Is DB connected:', connection.connections[0].isConnected);\n}\n`}\n        </CodeBlock>\n        <p>\n        Now open the <code>app.ts</code> file, import the createDbConnection and call the function to initialise the database: \n        </p>\n        <CodeBlock>\n{`//my-project/src/server/app.ts\n\nimport express from 'express';\nimport {'{'} createDbConnection } from './config/db'; //  Add this line\n\nexport async function createApp() {'{'}\n\n  await createDbConnection(); //  Add this line\n\n  const app = express();\n\n  app.get('/', (req, res) => {'{'}\n    res.send('<h2>It\\'s working</h2>');\n  });\n\n  return app;\n}`}\n        </CodeBlock>\n        <p>\n        If everything was done right you should see this message on your terminal:\n        </p>\n        <CodeBlock>\n{`Is DB connected: true\nThe server is running on port 3000!`}\n        </CodeBlock>\n\n  </Col>;\n}","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function entities(props?:any) {\n    return <Col>\n\n    <h2>Creating the Entity Classes</h2>\n\n    <p>\n      Now that the project is running and the database connection was established you will learn how to create the entities with the support of typeORM that is an Object Relational Mapper. This library allows for the creation of Entities in a TypeScript Class that will be automatically mapped into a table in the database.\n      Inside the <code>server</code> folder create a folder named <code>entities</code> and place these four files (It is good practice to name the Entities with the first letter capitalized eg. <code>User</code>):\n\n    </p>\n\n    <CodeBlock>\n      {`//my-project/src/server/entities/User.ts\n\nimport { Article } from './Article';\nimport { \n  Entity, Column, PrimaryGeneratedColumn, \n  OneToMany, ManyToMany, JoinTable, OneToOne \n} from 'typeorm';\nimport{ Role } from './Role';\nimport { ProfileImage } from './ProfileImage';\n\n@Entity('users') //  Name of the database table\nexport class User {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn() \n  public id!: number;\n\n  //  Add 'not null' constraint\n  @Column({nullable: false}) \n  public firstName!: string;\n\n  @Column({nullable: false})\n  public lastName!: string;\n\n  // Defines the property as unique\n  @Column({nullable:false, unique: true}) \n  public email!: string;\n\n  @Column({nullable: false})\n  public password!: string;\n\n  // A user can have many articles\n  @OneToMany(type => Article, article => article.user)\n  public articles!: Article;\n\n  // A user can have many roles and a role can be assigned to many users\n  @ManyToMany(type => Role, role => role.users)\n  @JoinTable({\n    name: 'user_roles', //  junction table name in database\n    joinColumn: {name: 'userId'}, //  property name of the owner\n    inverseJoinColumn: {name: 'roleId'} //  property name of the inverse relation\n  })\n  public roles!: Role[];\n\n  @OneToOne(type => ProfileImage, profileImage => profileImage.user)\n  public profileImage!: ProfileImage;\n\n  public constructor(\n    firstName: string,\n    lastName: string,\n    email: string,\n    password: string\n  ){\n    this.firstName = firstName;\n    this.lastName = lastName;\n    this.email = email;\n    this.password = password;\n  }\n}\n      \n      `}\n    </CodeBlock>\n    <CodeBlock>\n{`//my-project/src/server/entities/Article.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, ManyToOne} from 'typeorm';\nimport { User } from './User';\n\n@Entity('articles') //  Name of the table in database\nexport class Article {\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n  // Add 'not null' constraint\n  @Column({nullable: false})\n  public title!: string;\n\n  // Define the content to be of type 'long text'\n  @Column({type: 'longtext'})\n  public content!: string;\n\n  @ManyToOne(\n    type => User, user => user.articles, \n    {onDelete: 'CASCADE'} //  delete the association if user is deleted\n  )\n  public user!: User;\n\n  public constructor(\n    title: string,\n    content: string,\n  ){\n    this.title = title;\n    this.content = content;\n  }\n}\n`}\n      \n    </CodeBlock>\n    <CodeBlock>\n{`//my-project/src/server/entities/ProfileImage.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, OneToOne, JoinColumn } from 'typeorm';\nimport { User } from './User';\n\n@Entity('profile_images') //  Name of the table in database\nexport class ProfileImage {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n  // Add 'not null' constraint\n  @Column({nullable: false})\n  public url!: string;\n\n  @OneToOne(\n    type => User, user => user.profileImage,\n    {onDelete: 'CASCADE'} //  Deletes the association if user is deleted\n  )\n  @JoinColumn()\n  public user!: User\n\n  public constructor(\n    url: string\n  ){\n    this.url = url;\n  }\n}\n`}\n    </CodeBlock>\n\n    <CodeBlock>\n{`//my-project/src/server/entities/Role.ts\n\nimport { Entity, Column, PrimaryGeneratedColumn, ManyToMany} from 'typeorm';\nimport { User } from './User';\n\n@Entity('roles') //  name of table in database\nexport class Role {\n\n  // Auto generates an Id in database\n  @PrimaryGeneratedColumn()\n  public id!: number;\n\n\n  @Column({\n    type: 'enum', //  declare the type as ENUM\n    enum:['user', 'author', 'admin'], //  Property can only be one of them\n    nullable: false, //  Not null constraint\n    unique: true // Value must be unique\n  })\n  public name!: string;\n\n  // A role can be assigned to many users and a user can have many roles\n  @ManyToMany(type => User, user => user.roles)\n  public users!: User[];\n\n  public constructor(\n    name: string\n  ){\n    this.name = name;\n  }\n}\n`}\n    </CodeBlock>\n    <p>\n    TypeORM provides many functionalities. In these files we have used some annotations to inform what configuration should be passed to the tables, columns and relationships:\n    </p>\n    <ul>\n      <li>\n      <code>@Entity</code> - Declares the class as an table. As an option we can pass the name of the table, if blanc the class name will be used.\n      </li>\n      <li>\n      <code>@Column</code> - Declares the class properties as columns of the table. Many options can be passed through it, for more information see <a href=\"https://github.com/typeorm/typeorm/blob/master/docs/entities.md#column-options\">TypeORM - Column Options</a>\n      </li>\n      <li>\n      <code>@OneToOne</code> - Declares a one-to-one relationship between two tables. A foreign key is added in the table where it is declared. See more at <a href=\"https://github.com/typeorm/typeorm/blob/master/docs/one-to-one-relations.md\">TypeORM - One To One Relations</a>\n      </li>\n      <li>\n      <code>@ManyToOne</code> / <code>@OneToMany</code> - Declares a many-to-one / one-to-many relationship between two tables. The @ManyToOne annotation inserts a foreign key with the id of the associated table. See more at <a href=\"https://github.com/typeorm/typeorm/blob/master/docs/many-to-one-one-to-many-relations.md\">TypeORM - Many To One / One To Many Relations</a>\n      </li>\n      <li>\n      <code>@ManyToMany</code> - Declares a many-to-many relationship between two tables. The owner table must have the @JoinTable annotation in its class. A junction with the combined name of the tables will be automaticaly created in the database, this name can be changed passing some options as we have seen in the code. When using the annotation in both sides of the relationship the bi-directional searching is enabled in the typeORM repository methods as we will see during the controllers creation. To see more access <a href=\"https://github.com/typeorm/typeorm/blob/master/docs/many-to-many-relations.md\">TypeORM - Many To Many Relations</a>\n      </li>\n    </ul>\n    <p>\n    If you run the application now nothing will be created in the database, it is because we need to inform TypeORM which entities to map to the database.\n\n    Open the <code>db.ts</code> file and import all the created entities and add them in the entities array inside the <code>createConnection</code> function:\n\n    </p>\n  <CodeBlock>\n    {`//my-project/src/server/config/db.ts\n\n\nimport { createConnection, getConnectionManager } from \"typeorm\";\nimport{ User } from '../entities/User'; //  Add this line\nimport { Article } from '../entities/Article'; //  Add this line\nimport { Role } from '../entities/Role'; //  Add this line\nimport { ProfileImage } from '../entities/ProfileImage'; //  Add this line\n\nexport async function createDbConnection() {\n\n  // Set database variables from environment\n  const DATABASE_HOST = process.env.DATABASE_HOST;\n  const DATABASE_PASSWORD = process.env.DATABASE_PASSWORD;\n  const DATABASE_USER = process.env.DATABASE_USER;\n  const DATABASE_DB = process.env.DATABASE_DB;\n\n  // Create a database connection\n  await createConnection({\n    type: \"mysql\",\n    host: DATABASE_HOST,\n    port: 3306,\n    username: DATABASE_USER,\n    password: DATABASE_PASSWORD,\n    database: DATABASE_DB,\n    entities: [User, Article, Role, ProfileImage], //  Add this line\n    synchronize: true,\n  });\n\n  // Check if connection is successful\n  const connection = getConnectionManager();\n  console.log('Is DB connected:', connection.connections[0].isConnected);\n\n  // Create Roles (if non existent) on database connection\n  try {\n    const roleRepository = await connection.get('default').getRepository(Role);\n\n    // If user role does not exist, create it\n    if(! await roleRepository.findOne({where: {name: 'user'}})){\n      await roleRepository.save({name:'user'});\n    }\n\n    // If author role does not exist, create it\n    if(! await roleRepository.findOne({where: {name: 'author'}})){\n      await roleRepository.save({name:'author'});\n    }\n\n    // If admin role does not exist, create it\n    if(! await roleRepository.findOne({where:{name: 'admin'}})){\n      await roleRepository.save({name:'admin'});\n    }\n\n  }catch(error){\n    console.log(error);\n  }\n}\n    \n    `}\n  </CodeBlock>\n  <p>\n  At this point you are able to run the application with the command <code>npm start</code> and check the created tables in your database:\n  </p>\n\n<CodeBlock>\n  {`\nmysql> describe articles; describe profile_images; describe roles; describe user_roles; describe users;\n\n+---------+--------------+------+-----+---------+----------------+\n| Field   | Type         | Null | Key | Default | Extra          |\n+---------+--------------+------+-----+---------+----------------+\n| id      | int(11)      | NO   | PRI | NULL    | auto_increment |\n| title   | varchar(255) | NO   |     | NULL    |                |\n| content | varchar(255) | NO   |     | NULL    |                |\n| userId  | int(11)      | YES  | MUL | NULL    |                |\n+---------+--------------+------+-----+---------+----------------+\n4 rows in set (0.00 sec)\n\n+--------+--------------+------+-----+---------+----------------+\n| Field  | Type         | Null | Key | Default | Extra          |\n+--------+--------------+------+-----+---------+----------------+\n| id     | int(11)      | NO   | PRI | NULL    | auto_increment |\n| url    | varchar(255) | NO   |     | NULL    |                |\n| userId | int(11)      | YES  | UNI | NULL    |                |\n+--------+--------------+------+-----+---------+----------------+\n3 rows in set (0.00 sec)\n\n+-------+-------------------------------+------+-----+---------+----------------+\n| Field | Type                          | Null | Key | Default | Extra          |\n+-------+-------------------------------+------+-----+---------+----------------+\n| id    | int(11)                       | NO   | PRI | NULL    | auto_increment |\n| name  | enum('user','author','admin') | NO   |     | NULL    |                |\n+-------+-------------------------------+------+-----+---------+----------------+\n2 rows in set (0.01 sec)\n\n+--------+---------+------+-----+---------+-------+\n| Field  | Type    | Null | Key | Default | Extra |\n+--------+---------+------+-----+---------+-------+\n| userId | int(11) | NO   | PRI | NULL    |       |\n| roleId | int(11) | NO   | PRI | NULL    |       |\n+--------+---------+------+-----+---------+-------+\n2 rows in set (0.00 sec)\n\n+-----------+--------------+------+-----+---------+----------------+\n| Field     | Type         | Null | Key | Default | Extra          |\n+-----------+--------------+------+-----+---------+----------------+\n| id        | int(11)      | NO   | PRI | NULL    | auto_increment |\n| firstName | varchar(255) | NO   |     | NULL    |                |\n| lastName  | varchar(255) | NO   |     | NULL    |                |\n| email     | varchar(255) | NO   | UNI | NULL    |                |\n| password  | varchar(255) | NO   |     | NULL    |                |\n+-----------+--------------+------+-----+---------+----------------+\n5 rows in set (0.00 sec)\n  `}\n</CodeBlock>\n<p>\nNote that the three Roles (<code>user</code>, <code>author</code> and <code>admin</code>) were already saved in the database as well:\n</p>\n\n\n<CodeBlock>\n  {`\nmysql> select * from roles;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | user   |\n|  2 | author |\n|  3 | admin  |\n+----+--------+\n3 rows in set (0.00 sec)\n`}\n</CodeBlock>\n\n<p>\nLet's keep track of the project structure. It should be looking like this:\n</p>\n<img src='/images/structureAfterEntities.png' width='100%'></img>\n</Col>\n}\n","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function repositories(props?:any) {\n    return <Col>\n\n<h2>Creating the Repositories</h2>\n<p>\n  To be able to access the database we will import the Repository Layer provided by TypeORM. A repository will be needed for each entity. Please create a new folder called <code>repositories</code> inside the <code>server</code> folder and place these 4 files:\n</p>\n<CodeBlock>\n  {`//my-project/src/server/repositories/userRepository.ts\n  \nimport { getConnection } from 'typeorm';\nimport { User } from '../entities/User';\n\nexport function userRepository() {\n  return getConnection().getRepository(User);\n}`}\n  </CodeBlock>\n  <CodeBlock>\n    {`//my-project/src/server/repositories/articleRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { Article } from '../entities/Article';\n\nexport function articleRepository() {\n  return getConnection().getRepository(Article);\n}`}\n  </CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/repositories/profileImageRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { ProfileImage } from '../entities/ProfileImage';\n\nexport function profileImageRepository() {\n  return getConnection().getRepository(ProfileImage);\n}\n  `}</CodeBlock>\n  \n  <CodeBlock>\n{`//my-project/src/server/repositories/roleRepository.ts\n\nimport { getConnection } from 'typeorm';\nimport { Role } from '../entities/Role';\n\nexport function roleRepository() {\n  return getConnection().getRepository(Role);\n}`}    \n    </CodeBlock>\n    <p>\n    As we will see when building the controllers, these repositories will provide out of the box functions for accessing, creating, deleting and changing data in the database.\n    </p>\n</Col>\n}","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function router(props?:any) {\n    return <Col>\n\n  <h2>Creating the Routes and App Router</h2>\n\n  <p>\n  To be able to access the different routes (endpoints) in the application we need to create two routes files <code>userRoutes</code> and <code>articleRoutes</code> and a <code>router</code> that will deal with the API routing.\n\n  Create a new folder called <code>routes</code> inside the <code>server</code> folder. Please place these two files inside it:\n  </p>\n<CodeBlock>\n  {`//my-project/src/server/routes/userRoutes.ts\n\nimport express from 'express';\n\nconst routes = express.Router();\n\nroutes.get('/', (req, res) => res.send('<h1>get all users</h1>'));\nroutes.get('/:id', (req, res) => res.send('get user by id'));\nroutes.get('/:id/roles/add/:roleId', (req, res) => res.send('add role to user'));\nroutes.get('/:id/roles/remove/:roleId', (req, res) => res.send('remove role from user'));\n\nroutes.post('/', (req, res) => res.send('create user'));\n\nroutes.patch('/:id', (req, res) => res.send('update user'));\n\nroutes.delete('/:id', (req, res) => res.send('delete user'));\n\nexport default routes;`}\n</CodeBlock>\n<CodeBlock>\n{`//my-project/src/server/routes/articleRoutes.ts\nimport express from 'express';\n\nconst routes = express.Router();\n\nroutes.get('/', (req, res) => res.send('<h1>get all articles</h1>'));\nroutes.get('/:id', (req, res) => res.send('get article by id'));\n\nroutes.post('/', (req, res) => res.send('create article'));\n\nroutes.patch('/:id', (req, res) => res.send('update an article'));\n\nroutes.delete('/:id', (req, res) => res.send('delete an article'));\n\nexport default routes;\n\n`}\n</CodeBlock>\n\n<p>\nTo be able to access these routes we still need to create a <code>router.ts</code> file inside the <code>server</code> folder:\n</p>\n<CodeBlock>\n{`//my-project/src/server/router.ts\n\nimport articleRoutes from './routes/articleRoutes';\n  import userRoutes from './routes/userRoutes';\n\n  export const router = [\n    {path: '/articles', endpoints: articleRoutes},\n    {path: '/users', endpoints: userRoutes}\n  ];`}  \n</CodeBlock>\n<p>\nFinally we need to import this newly created router into the <code>app.ts</code> file and initialize it:\n</p>\n<CodeBlock>\n  {`//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router'; // Add this line\n\nexport async function createApp() {\n\n  await createDbConnection();\n\n  const app = express();\n\n  // For each route in the router profide the path and response\n  router.forEach(route => { // Add this loop\n    app.use(\\`/api/v1\\${route.path}\\`, route.endpoints);\n  });\n  \n  app.get('/', (req, res) =>{\n    res.send('<h2>It\\'s working</h2>');\n  });\n\n  return app;\n}`}</CodeBlock>\n<p>These routes are not doing anything smart for now, they are only returning some dummy text as the response. Run the app with the command <code>npm start</code>, open your browser and type the following routes in the browser address:\n</p>\n <p>localhost:3000/api/v1/users</p>\n\n  <img src='/images/getAllUsersRoute.png' width='100%'></img>\n\n  <p>localhost:3000/api/v1/articles</p>\n\n  <img src='/images/getAllArticlesRoute.png' width='100%'></img>\n\n</Col>\n}\n","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function validations(props?:any) {\n    return <Col>\n    <h2>Implementing validation</h2>\n\n    <p>To add a layer of validation in our API we will use a library called Joi. It provides functionalities to help on data validation. This library was already installed within the <code>npm install</code> command at the begining of this tutorial. \n\n<strong>To check all the project dependencies open the package.json file and check the dependencies object.</strong>\n\nCreate a new folder called <code>validation</code> inside the <code>server</code> folder and add these two files:</p>\n\n    <CodeBlock>\n{`//my-project/src/server/validation/userValidation.ts\n\nimport { User } from '../entities/User';\nimport * as joi from 'joi';\n\nexport function validateUser(user: User){\n  const schema = joi.object({\n    // Should be a string with at maximum 30 characters\n    firstName: joi.string().max(30),\n    // Should be a string with at maximum 50 characters\n    lastName: joi.string().max(50),\n    // Should be a string in an email format\n    email: joi.string().email(),\n    // Should be a string with at least 6 characters\n    password: joi.string().min(6)\n    // The strip unknown options removes unknown elements from \n    // objects and arrays, blocking their inclusion in the database \n  }).options({stripUnknown: true});\n\n  return joi.validate(user, schema);\n}`}\n    </CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/validation/articleValidation.ts\n\n\nimport { Article } from '../entities/Article';\nimport * as joi from 'joi';\n\nexport function validateArticle(article: Article){\n  const schema = joi.object({\n    // Should be a string with at maximum 50 characters\n    title: joi.string().max(50),\n    // Should be a string with at minimum 50 characters\n    content: joi.string().min(50),\n    // The strip unknown options removes unknown elements from \n    // objects and arrays, blocking their inclusion in the database \n  }).options({stripUnknown: true});\n\n  return joi.validate(article, schema);\n}`}</CodeBlock>\n<p>Before moving to the next step let's check our <strong>project folder structure</strong>. After all those changes it should look like this:</p>\n\n\n<img src='/images/folderStructureAfterValidation.png' width='100%'></img>\n\n</Col>}","\nimport React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function services(props?:any) {\n    return <Col>\n<h2>Creating the Services</h2>\n<p>\nThe service classes will be used to abstract data manipulation and logic implementation from our future controller classes, leaving the controllers responsible only for calling methods from the services classes.\n We are going to create five services, one for each entity and a file uploader service to be able to upload profile pictures. Inside the <code>server</code> folder create a new folder called <code>services</code> and place these five files:\n</p>\n    <CodeBlock>\n{`//my-project/src/server/services/userService.ts\n\nimport { User } from './../entities/User';\nimport { userRepository } from \"../repositories/userRepository\";\nimport { Role } from '../entities/Role';\n\nexport class UserService {\n\n  public constructor() { }\n\n  public create(newUser: User) {\n    // Create a new user object\n    const user = new User(\n      newUser.firstName, newUser.lastName, \n      newUser.email, newUser.password\n    );\n    // Save user in database and return it\n    return userRepository().save(user);\n  }\n\n  public save(user: User) {\n    // Save user in database and return it\n    return userRepository().save(user);\n  }\n\n  public findAll() {\n    // Find all users in database and return then with the profile image and roles\n    return userRepository().find({ relations: ['profileImage', 'roles'] });\n  }\n\n  public findById(id: number){\n    // Find a user by id and return it with the profile image and roles\n    return userRepository().findOne(id, { relations: ['profileImage', 'roles'] });\n  }\n\n  public update(user: User, values: any) {\n    // Get all properties to be updated\n    const properties = Object.keys(values);\n    // For each property update in user\n    properties.forEach(property => {\n      (user as any)[property] = values[property];\n    });\n    // Save and return the updated user\n    return userRepository().save(user);\n  }\n\n  public delete(id: number){\n    // Delete a user by id\n    return userRepository().delete(id);\n  }\n\n  public addRole(role: Role, user: User) {\n    // Add role in the user's roles\n    user.roles.push(role);\n    // Save and return the user\n    return userRepository().save(user);\n  }\n\n  public removeRole(role: Role, user: User) {\n    // Remove the passed role from user roles\n    user.roles = user.roles.filter(r => r.name !== role.name);\n    // Save and return the user\n    return userRepository().save(user);\n  }\n\n}`}</CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/services/articleService.ts\n\nimport {User } from './../entities/User';\nimport {Article } from './../entities/Article';\nimport{articleRepository } from \"../repositories/articleRepository\";\n\nexport class ArticleService{\n\n  public constructor(){ }\n\n  public create(newArticle: Article, user: User) {\n    // Asign the user as the article's owner\n    newArticle.user = user;\n    // Save the article and return it\n    return articleRepository().save(newArticle);\n  }\n\n  public findAll(){\n    // Find all articles in database\n    return articleRepository().find();\n  }\n\n  public findById(id: number){\n    // Find an article by id in database\n    return articleRepository().findOne(id, {relations: ['user']});\n  }\n\n  public update(article: Article, values: any) {\n    // Get all properties to be updated\n    const properties = Object.keys(values);\n    // For each property update in the article\n    properties.forEach(property => {\n      (article as any)[property] = (values)[property];\n    });\n    // Save and return the updated article\n    return articleRepository().save(article);\n  }\n\n  public delete(id: number) {\n    // Delete an article by id \n    return articleRepository().delete(id);\n  }\n\n}`}</CodeBlock>\n  <CodeBlock>\n    {`//my-project/src/server/services/roleService.ts\n\nimport {roleRepository } from \"../repositories/roleRepository\";\n\nexport class RoleService {\n\n  public constructor(){ }\n\n  public findAll() {\n    // Find all roles in database\n    return roleRepository().find();\n  }\n\n  public findById(id: number) {\n    // Find an article by id and return it\n    return roleRepository().findOne(id);\n  }\n\n}\n  `}\n  </CodeBlock>\n  <CodeBlock>\n    {`//my-project/src/server/services/profileImageService.ts\n\nimport { User } from './../entities/User';\nimport { ProfileImage } from './../entities/ProfileImage';\nimport { profileImageRepository } from \"../repositories/profileImageRepository\";\n\nexport class ProfileImageService {\n\n  public constructor(){ }\n\n  public create(image: ProfileImage, user: User) {\n    // Assign a user to the profile image\n    image.user = user;\n    // Save and return it\n    return profileImageRepository().save(image);\n  }\n\n}\n    `}\n  </CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/services/fileUploaderService.ts\n\nimport multer from 'multer';\nimport{ Request } from 'express';\n\n// Set the file destination folder and it's filename\nconst storage = multer.diskStorage({\n  destination: (req, file, cb) => cb(null, './uploads/images'),\n  filename: (req, file, cb) => cb(null, new Date().toISOString() + file.originalname)\n});\n\n// Accepts only 'jpeg' and 'png' image formats\nconst fileFilter = (req: Request, file: any, cb: any) => {\n  if(file.mimetype === 'image/jpeg' || file.mimetype === 'image/png'){\n    cb(null, true);\n  }else{\n    cb(null, false);\n  }\n}\n\n// Return the uploader setting the max image size to 5MB\nexport const uploader = multer({\n  storage: storage,\n  limits: {fileSize: 1024*1024*5},\n  fileFilter: fileFilter\n});`}</CodeBlock>\n<p>\nWe have informed multer to store the images in the <strong>my-project/uploads/images</strong> directory, but it is not enough, we still need to create these new folders and inform express about this new route.\n Create a new folder called <code>uploads</code> inside the <code>my-project</code> root folder. Inside <code>uploads</code> create another folder called <code>images</code>. After that open the <code>app.ts</code> file and include a new route pointing to the new static folder:\n</p>\n<CodeBlock>\n  {`//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router';\n\nexport async function createApp() {\n\n  // Create database connection\n  await createDbConnection();\n\n  // Create express application\n  const app = express();\n\n  // For each route in the router use the route endpoint\n  router.forEach(route => {\n    app.use(\\`/api/v1\\${route.path}\\`, route.endpoints);\n  });\n\n  // Inform express to look for a new static route 'uploads/images'\n  app.use('/uploads/images', express.static('uploads/images'));\n  \n  // Add route '/' to application\n  app.get('/', (req, res) =>{\n    res.send('<h2>It\\'s working</h2>');\n  });\n\n  return app;\n}`}\n  </CodeBlock> \n</Col>\n}\n","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function controllers(props?:any) {\n    return <Col>\n<h2>Creating the Controllers</h2>\n<p>The controller classes will be responsible for receiving the HTTP requests, dealing with services to process what was requested and sending a response back to the client that accessed its endpoint.\n For our application we only need to build two controllers. Please create a new folder named <code>controllers</code> inside the <code>server</code> folder and place these two classes:\n</p>\n<CodeBlock>\n  {`//my-project/src/server/controllers/userController.ts\n\nimport { ProfileImage } from './../entities/ProfileImage';\nimport { ProfileImageService } from './../services/profileImageService';\nimport { UserService } from './../services/userService';\nimport { Request, Response } from 'express';\nimport { validateUser } from '../validation/userValidation';\nimport { RoleService } from '../services/roleService';\n\nconst userService = new UserService();\nconst roleService = new RoleService();\nconst imageService = new ProfileImageService();\n\nexport default class UserController {\n\n  public constructor() { }\n\n  public async create(req: Request, res: Response) {\n    try {\n\n      // Validate user input\n      const validation = validateUser(req.body);\n\n      // If any error return a Bad Request status and error details\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Create a new user with given inputs\n      let newUser = await userService.create(req.body);\n\n      // Get the role 'user' with id = 1\n      const userRole = await roleService.findById(1);\n\n      // A file has been sent, create a profile image and assign it to the user\n      if(req.file) {\n        const profileImage = new ProfileImage(\\`http://localhost:3000/\\${req.file.path}\\`)\n        await imageService.create(profileImage, newUser);\n      }\n\n      // Get the create user from database\n      const user = await userService.findById(newUser.id);\n\n      // Add the 'user' role to the user\n      await userService.addRole(userRole!, user!);\n\n      // // Return the created user from database\n      return res.status(201).json(user);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async update(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n      const values = req.body;\n\n      // Validate user input\n      const validation = validateUser(req.body);\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find user by id\n      const user = await userService.findById(id);\n      // If the user is not found return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: \\`User id \\${id} not found\\`});\n\n      // Update user properties to passed values\n      const updated = await userService.update(user, values);\n\n      // Return updated user\n      res.status(200).json(updated);\n      \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async findAll(req: Request, res: Response) {\n    try {\n      // Find all users from database\n      const users = await userService.findAll();\n\n      // Return found users to client\n      return res.status(200).json(users);\n\n    }catch(error) {\n      console.log(error);\n      return res.status(500).json(error);\n    }\n  }\n\n  public async findById(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(id);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: \\`User id \\${id} not found\\`});\n\n      // Return found user\n      return res.status(200).json(user);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async delete(req: Request, res: Response) {\n    try {\n      // Get id from request parameters\n      const id = req.params.id;\n\n      // Delete user from database\n      const deleted = await userService.delete(id);\n\n      // If no user deleted, return Not Found error\n      if(deleted.affected === 0) return res.status(404).json({error: \\`User id \\${id} not found\\`});\n    \n      // Return status OK with deletion message\n      return res.status(200).json({message: \\`User id \\${id} deleted\\`});\n    \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async addRole(req: Request, res: Response) {\n    try {\n      const roleId = req.params.roleId;\n      const userId = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: \\`User id \\${userId} not found\\`});\n\n      // Find role to be added by its id\n      const role = await roleService.findById(roleId);\n      // If role does not exist return a 404 'Not found' error\n      if(!role) return res.status(404).json({error: \\`Role id \\${roleId} not found\\`});\n\n      // Add role to the user\n      const updated = await userService.addRole(role, user);\n\n      // Return updated user\n      res.status(201).json(updated);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async removeRole(req: Request, res: Response) {\n    try {\n      const roleId = req.params.roleId;\n      const userId = req.params.id;\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If id does not exist, return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: \\`User id \\${userId} not found\\`});\n\n      // Find role by id\n      const role = await roleService.findById(roleId);\n      // If role does not exist return a 404 'Not found' error\n      if(!role) return res.status(404).json({error: \\`Role id \\${roleId} not found\\`});\n\n      // Remove the passed role from user\n      const updated = await userService.removeRole(roleId, user);\n\n      // Return the updated user\n      res.status(200).json(updated);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n}\n  `}\n</CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/controllers/articleController.ts\n\nimport { UserService } from './../services/userService';\nimport { Request, Response } from 'express';\nimport { ArticleService } from '../services/articleService';\nimport { validateArticle } from '../validation/articleValidation';\n\nconst articleService = new ArticleService();\nconst userService = new UserService();\n\nexport class ArticleController {\n\n  public constructor() { }\n\n  public async create(req: Request, res: Response) {\n    try {\n      const userId = req.body.userId;\n\n      // Create a new article from request body\n      const newArticle = req.body.article;\n\n      // Validate article input\n      const validation = validateArticle(newArticle);\n\n      // If any error return a Bad Request status and error details\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find user by id\n      const user = await userService.findById(userId);\n      // If user does not exist return a 404 'Not found' error\n      if(!user) return res.status(404).json({error: \\`User id \\${userId} not found\\`});\n\n      // Create a new article with given inputs and the owner user\n      const article = await articleService.create(newArticle, user);\n\n      // Return the created article from database\n      return res.status(201).json(article);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async update(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n      const values = req.body;\n\n      // Validate user input\n      const validation = validateArticle(req.body);\n      if(validation.error) return res.status(400).json(\n        {error: validation.error.details}\n      );\n\n      // Find article by id\n      const article = await articleService.findById(id);\n      // If article does not exist return a 404 'Not found' error\n      if(!article) return res.status(404).json({error: \\`Article id \\${id} not found\\`});\n\n      // Update article with passed values\n      const updated = await articleService.update(article, values);\n\n      // Return the updated article\n      res.status(200).json(updated);\n      \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async findAll(req: Request, res: Response) {\n    try {\n      // Find all articles from database\n      const articles = await articleService.findAll();\n\n      // Return all found articles\n      return res.status(200).json(articles);\n\n    }catch(error) {\n      console.log(error);\n      return res.status(500).json(error);\n    }\n  }\n\n  public async findById(req: Request, res: Response) {\n    try {\n      const id = req.params.id;\n\n      // Find article by id\n      const article = await articleService.findById(id);\n      // If article does not exist return a 404 'Not found' error\n      if(!article) return res.status(404).json({error: \\`Article id \\${id} not found\\`});\n\n      // Return article to the client\n      return res.status(200).json(article);\n\n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n  public async delete(req: Request, res: Response) {\n    try {\n      // Get id from request parameters\n      const id = req.params.id;\n\n      // Delete article from database\n      const deleted = await articleService.delete(id);\n\n      // If no article deleted, return Not Found error\n      if(deleted.affected === 0) return res.status(404).json({error: \\`Article id \\${id} not found\\`});\n    \n      // Return status OK with deletion message\n      return res.status(200).json({message: \\`Article id \\${id} deleted\\`});\n    \n    }catch(error) {\n      console.log(error);\n      res.status(500).json(error);\n    }\n  }\n\n}\n  `}\n</CodeBlock>\n<p>We have created a method to deal with each one of the user and article routes we have previously created.\n To link these methods to the API routes we have to change the user and article routes a little bit:\n\n</p>\n\n<CodeBlock>\n  {`//my-project/src/server/routes/userRoute.ts\n\nimport express from 'express';\nimport UserController from '../controllers/userController';\nimport { uploader } from '../services/fileUploaderService';\n\n// Initialise user controller\nconst userController = new UserController();\n\n// Create a new express router\nconst routes = express.Router();\n\n// Add routes to the router\n\nroutes.get('/', userController.findAll);\nroutes.get('/:id', userController.findById);\nroutes.get('/:id/roles/add/:roleId', userController.addRole);\nroutes.get('/:id/roles/remove/:roleId', userController.removeRole);\n\nroutes.post('/', uploader.single('profileImage'), userController.create);\n\nroutes.patch('/:id', userController.update);\n\nroutes.delete('/:id', userController.delete);\n\nexport default routes;\n  `}\n</CodeBlock>\n<CodeBlock>\n  {`//my-project/src/server/routes/articleRoute.ts\n\nimport { ArticleController } from './../controllers/articleController';\nimport express from 'express';\n\n// Initialise user controller\nconst articleController = new ArticleController();\n\n// Create a new express router\nconst routes = express.Router();\n\n// Add routes to the router\n\nroutes.get('/', articleController.findAll);\nroutes.get('/:id', articleController.findById);\n\nroutes.post('/', articleController.create);\n\nroutes.patch('/:id', articleController.update);\n\nroutes.delete('/:id', articleController.delete);\n\nexport default routes;\n  `}\n</CodeBlock>\n</Col>\n}","import React from 'react';\nimport Col from 'react-bootstrap/Col';\nimport { CodeBlock } from '../lib/components/codeBlock/codeBlock';\n\nexport function bodyParser(props?:any) {\n    return <Col>\n      \n     <h2>Implementing Body Parser</h2>\n\n     <p>\n      Now that our routes and controllers are implemented we will be able to access most of the endpoints, but not yet those that use POST methodos. Our express application can not read the values that are being passed through the body of the request. \n       To be able to do it we need to implement the bodyParser library. Open the app.ts file and tell express to use the bodyParser library:\n     </p>\n\n<CodeBlock>\n  {`//my-project/src/server/app.ts\n\nimport express from 'express';\nimport { createDbConnection } from './config/db';\nimport { router } from './router';\nimport bodyParser from 'body-parser';\n\nexport async function createApp() {\n\n  // Create database connection\n  await createDbConnection();\n\n  // Create express application\n  const app = express();\n\n  // Inform express to use bodyParser\n  app.use(bodyParser.json());\n  app.use(bodyParser.urlencoded({extended: true}));\n\n  // For each route define the path and endpoint\n  router.forEach(route => {\n    app.use(\\`/api/v1\\${route.path}\\`, route.endpoints);\n  });\n\n  // Inform express to look for a new static route 'uploads/images'\n  app.use('/uploads/images', express.static('uploads/images'));\n  \n  // Add route '/' to application\n  app.get('/', (req, res) => {\n    res.send(\"<h2>It\\'s working</h2>\");\n  });\n\n  // If a  path is not found return a 404 'Not found' error\n  app.use('*', (req, res) => {\n    res.status(404).json({error: 'Route not found'});\n  });\n\n  return app;\n}`}\n</CodeBlock>\n\n</Col>}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './sidebar.css'\n\n\n\ninterface SidebarProps{\n    listItems: any[];\n    actualPath: string;\n}\ninterface SidebarState{\n    \n    \n}\nexport class Sidebar extends React.Component<SidebarProps, SidebarState>{\n    constructor(props:SidebarProps){\n        super(props)\n        this.state ={\n        }\n        this._handleListClick = this._handleListClick.bind(this)\n    }\n    private _handleListClick(key:number){\n    }\n    render(){\n        return (\n            <ul id=\"sider\" className='nav flex-column py-5'>\n                {\n                    this.props.listItems.map((item:any, key:any) => \n                        <li className={'nav-item h6 px-3 ' + (this.props.actualPath === item.path ? ' active':'')} key={key} onClick={()=>this._handleListClick(key)}>\n                            <strong><Link className='nav-link' to={item.path}>{item.title}</Link></strong>\n                        </li>)\n                }\n            </ul>\n        )\n    }\n}\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport { Content } from \"../../../lib/components\";\nimport { postsRoutes } from \"../../config/posts-routing\";\nimport { Route, Link } from 'react-router-dom';\nimport { Sidebar } from '../../../lib/components/sidebar/sidebar';\n\ninterface TutorialProps{\n    location?: any\n}\n\nexport class Tutorial extends React.Component<TutorialProps>{\n    render(){\n         const {location} = this.props\n        return (\n            <Container fluid>\n                <Row>\n                <div style={{width: '276px', minHeight: '100vh'}} className=\" bg-light \">\n                    <Sidebar listItems={postsRoutes} actualPath={location.pathname}/>\n                </div>\n                \n\n                <Col md={8} className=\"px-3\">\n                    {\n                        postsRoutes.map((item:any, key:any) => <Route exact path={item.path}  render={()=><Content className=\"py-5\">{item.post()}</Content>} key={key} />)\n                    }\n                </Col>\n                </Row>\n                \n                \n                \n            </Container>\n        )\n    }\n}\n","import {ApiService} from '../helpers/api'\nimport {getLoggedUser} from '../helpers/authGuard'\n\nconst api  = new ApiService;\n\nexport class ChallengeService {\n    domain:string\n    constructor(domain?:string){\n        this.domain = domain || process.env.REACT_APP_API + '/challenges'\n    }\n\n    public getAll(){\n        return api.fetch(this.domain,{\n            method:'GET'})\n            .then((res:any) => {return res})\n    }\n    public get(id:number){\n        return api.fetch(this.domain+'/'+id,{\n            method:'GET'})\n            .then((res:any) => {return res})\n    }\n    public test(id:number, challengeAns:any){\n        return api.fetch(this.domain+`/${id}/test`,{\n            \"Content-Type\": \"application/json\",\n            method:'POST',\n            body: challengeAns\n        })\n        .then((res:any) => {return res})\n    }\n}","import React, {Component, CSSProperties} from 'react'\nimport { Modal, Button } from 'react-bootstrap';\nimport { Content } from '../content/content';\n\ninterface FBModalProps{\n    onHide: () => any;\n    show: boolean;\n    feedback: {\n      failures:number,\n      results:any[]\n    }\n}\n\ninterface FBModalState{\n\n}\nexport class FeedbackModal extends Component<FBModalProps,FBModalState>{\n    constructor(props:FBModalProps){\n        super(props)\n    }\n    private _renderFeedBack(){\n      let divClasses = \"my-5\"\n      let modalIconClasses = \"mx-auto d-block img-fluid\"\n      let modalIconCSS:CSSProperties = {height: \"inherit\"}\n\n      if(this.props.feedback.failures > 0){\n        return <div>\n        <div style={{height:\"200px\"}} className={divClasses}>\n          <img src=\"/images/whoops.png\" className={modalIconClasses} style={modalIconCSS}/>\n        </div>\n        <h4>Whoops... Check your code again!!!</h4>\n      </div>\n      }\n      return <div >\n        <div style={{height:\"200px\"}} className={divClasses}>\n          <img src=\"/images/happy.png\" className={modalIconClasses} style={modalIconCSS}/>\n        </div>\n        <h4>Well done, keep up!!!</h4>\n      </div>\n    }\n    private _renderResults(){\n      const { results } = this.props.feedback\n      // render the icon acording to the result state\n      let icon:any = (state:string)=>{\n            if(state==\"passed\"){\n              return <i className=\"fas fa-check text-success mr-4\"></i>\n            }\n            return <i className=\"fas fa-times text-danger mr-4\"></i>\n        }\n      return (\n        <ul className=\"list-group list-group-flush\">{\n          results.map((item:any, index:number)=>{\n            return <li className={\"list-group-item \"+ (index==0 ? \"border-0\":\"\") } key={index}>{icon(item.state)}\n              <h5 className=\"d-inline\">{item.title}</h5>\n            </li>\n           \n          })\n        }</ul>\n      )\n\n      \n    }\n    render(){\n        return (\n            <Modal \n        {...this.props}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n      >\n          <Content className=\"py-3\">\n            {this._renderFeedBack()}\n            <h5>Check your results:</h5>\n            {this._renderResults()}  \n          </Content>\n          <Content className=\"pb-3\"><Button className=\"float-right\" onClick={this.props.onHide}>Close</Button></Content>\n      </Modal>\n        )\n\n    }\n} \n\n\n\t  ","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Form from 'react-bootstrap/Form';\nimport { Content } from \"../../../lib/components\";\nimport { Sidebar } from '../../../lib/components/sidebar/sidebar';\nimport Button from 'react-bootstrap/Button';\nimport {ChallengeService} from \"../../../services/ChallengeService\"\nimport { FeedbackModal } from '../../../lib/components/feedbackModal/feedbackModal';\nimport { Loading } from '../../../lib/components/loading/loading';\nimport { CodeBlock } from '../../../lib/components/codeBlock/codeBlock';\n\ninterface challengesRoute {\n    title: string;\n    path: string;    \n}\ninterface ChallengesProps{\n    location?: any;\n    history?:any;\n    match?:any;\n}\ninterface ChallengesState{\n    challengesList: challengesRoute[] | null;\n    location?: any\n    challengeAns:string;\n    error:string|null;\n    title: string|null;\n    level: string|null;\n    description: string;\n    sampleAnswer: string;\n    fbModalShow:boolean;\n    challengeId: number | null;\n    feedback: {\n            failures:number,\n            results:any[]\n        } | null;\n    pageLoading:boolean;\n    reload:boolean;\n}\nconst challService:ChallengeService = new ChallengeService;\nexport class Challenges extends React.Component<ChallengesProps,ChallengesState>{\n    public constructor(props: ChallengesProps) {\n        super(props);\n        this.state = {\n            challengeAns:\"\",\n            error: null,\n            title: null,\n            level: null,\n            description: \"\",\n            sampleAnswer: \"\",\n            challengesList: null,\n            fbModalShow: false,\n            feedback: {\n                failures: 1,\n                results: [\n                    {title: \"some text\", state: \"passed\"},\n                    {title: \"some text\", state: \"failed\"}\n                ]\n            },\n            pageLoading: true,\n            challengeId: null,\n            reload:false\n        };\n        this._onChange = this._onChange.bind(this)\n        this._handleSubmit = this._handleSubmit.bind(this)\n    }\n\n    private _onChange(e:any) {\n        this.setState({ ...this.state, [e.target.id]:e.target.value, error:null })\n    }\n    private _renderServerErrors() {\n        if (!!this.state.error) {\n            return <div className=\"text-center h5\" style={{\n                width: \"100%\",\n                marginTop: \"0.25rem\",\n                color: \"#dc3545\"}}><strong>Error: </strong>{this.state.error}</div>;\n        } else {\n            return <div></div>;\n        }\n    }\n    private _renderChallengeDescription() {\n        const { description } = this.state;\n        if (!!description) {\n            let data = description.split('<CodeBlock>')\n            return  data.map((item, index) =>{\n                if (index%2==1){\n                    return <CodeBlock key={index}>{item}</CodeBlock>\n                }\n                return <div key={index} dangerouslySetInnerHTML={{__html:item}}></div>\n            })\n            \n        } else {\n            return <div></div>;\n        }\n    }\n    private _renderSidebar() {\n        const {challengesList} = this.state\n        if (!!challengesList) {\n            return (\n                <Sidebar listItems={challengesList} actualPath={this.props.location.pathname}/>\n            )\n        } else {\n            return <div></div>;\n        }\n    }\n    private _renderFBModal() {\n        let modalClose = () => this.setState({fbModalShow:false})\n        const {feedback, fbModalShow, } = this.state\n        if (!!feedback) {\n            return (\n                <FeedbackModal show={fbModalShow} feedback={feedback} onHide={modalClose}/>\n            )\n        } else {\n            return <div></div>;\n        }\n    }\n    private _handleSubmit(){\n        this.setState({pageLoading: true});\n        (async()=>{\n            const rest = await challService.test(this.props.match.params.id, this.state.challengeAns)\n                .then((res:any) => {\n                    this.setState({\n                        feedback: res, \n                        fbModalShow: true, \n                        error: null\n                    });\n                })\n                .catch((err:any) => {\n                    let errSubStr = (err.message[0] as string).split(\":\");\n                    let errMsg = errSubStr[errSubStr.length-1];\n                    this.setState({ error: errMsg});\n            })\n            this.setState({pageLoading: false});\n        })();\n    }\n    private _loadChallengeData(){\n        this.setState({pageLoading: true});\n        (async () => {\n            await challService.get(this.props.match.params.id)\n                .then((res:any)=> {\n                    let {title, description, sampleAnswer, level, id } = res;\n                    this.setState({title, description, sampleAnswer, level, challengeId: id  })\n                })\n                .catch((e:any)=>{\n                    console.log(e)\n                });\n            await challService.getAll()\n                .then((res:any)=> {\n                    let list = res.sort((a: any,b: any) => a.id - b.id)\n                        .map((item:any)=>{\n                            return {\n                                title: item.title,\n                                path: `/challenges/${item.id}`\n                            }\n                    })\n                    this.setState({challengesList: list})\n                })\n                .catch((e:any)=>{\n                    console.log(e)\n                });\n            this.setState({pageLoading: false})\n        })();\n    }\n    componentDidUpdate(nextProps:any, prevState:any) {\n        if(this.props.match.params.id!==nextProps.match.params.id){\n            this._loadChallengeData();\n        }\n    }\n    public componentDidMount() {\n        this._loadChallengeData();\n    }\n    render(){\n        let { title, description, challengesList, level } = this.state;\n        return (\n            <Container fluid>\n                <Row>\n                <div style={{ width: '276px' }} className=\" bg-light \">\n                    {this._renderSidebar()}\n                </div>\n                <Col md={8} className=\"px-3\">\n                    <Content className=\"py-5\">\n                        <h2>\n                            {title}\n                            <small className=\"text-muted\"> - {level} level</small>\n                        </h2>\n                        <Row><Col>{this._renderChallengeDescription()}</Col></Row>\n                        <Form>\n                            <Form.Group controlId=\"challengeAns\">\n                            <Form.Label>Let's code:</Form.Label>\n                            <Form.Control as=\"textarea\" rows={10} onChange={this._onChange} />\n                            </Form.Group>\n                        </Form>\n                        <Button className=\"float-right\" variant=\"primary\" onClick={this._handleSubmit}><strong>POST</strong></Button>\n                        {/* <Button className=\"float-right\" variant=\"primary\" onClick={()=>this.setState({fbModalShow:true})}><strong>POST</strong></Button> */}\n                        {this._renderServerErrors()}\n                        {this._renderFBModal()}\n                    </Content>\n                </Col>\n                </Row>\n                <Loading show={this.state.pageLoading}/>\n            </Container>\n        )\n    }\n}","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Image from 'react-bootstrap/Image';\nimport { Section } from '../../../lib/components/section/section';\n\nimport { withRouter } from \"react-router-dom\";\nimport Col from 'react-bootstrap/Col';\nimport { Hero } from '../../../lib/components/hero/hero';\nimport { Signup } from '../../../lib/components';\n\nexport class Register extends React.Component{\n    render(){\n        const {history}:any = this.props\n        return (\n            <Container fluid className=\"bg-light px-0\">\n                <Hero><Signup history={history}/></Hero>\n                <Container fluid >\n                    <Section>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Fernando Marinho</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\" />\n                            <h3>Gustavo Lessa</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Lucival</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                        <Col className=\"text-center\">\n                            <Image src=\"./images/profileImage.svg\" roundedCircle className=\"mb-3\"/>\n                            <h3>Rafael Barros</h3>\n                            <p>\n                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n                            </p>\n                        </Col>\n                    </Section>\n                </Container>\n            </Container>\n        )\n    }\n}","import React from 'react';\nimport { Home } from \"../pages/home/home\";\nimport { Tutorial } from \"../pages/tutorial/tutorial\";\nimport { Challenges } from \"../pages/challenges/challenges\";\nimport { Register } from \"../pages/register/register\";\n\ninterface RouteConf {\n    isIndex?: boolean;\n    displayInNavBar?: boolean;\n    title: string;\n    path: string;\n    component: JSX.Element //React.ComponentType<RouteComponentProps<any>> | React.ComponentType<any>\n    exact: boolean;\n    isProtected?: boolean;\n    onlyGuest?:boolean;\n    href:string;\n}\n\nexport const PATHS = {\n    home: \"/\",\n    tutorial: \"/tutorial/\",\n    challenges: \"/challenges/:id\",\n    login: \"/login\",\n    register: \"/register\",\n}\nexport const HREF = {\n    home: \"/\",\n    tutorial: \"/tutorial/\",\n    challenges: \"/challenges/1\",\n    login: \"/login\",\n    register: \"/register\",\n}\n\nexport const routes: RouteConf[] = [\n    { href: HREF.home, isIndex: true, title: \"Home\", path: PATHS.home, component: <Home/> , exact:true, displayInNavBar:false },\n    { href: HREF.tutorial, isIndex: false, title: \"Tutorial\", path: PATHS.tutorial, component: <Tutorial/>, exact:false },\n    { href: HREF.challenges, isIndex: false, title: \"Challenges\", path: PATHS.challenges, component: <Challenges/>, exact:false, isProtected:true },\n    { href: HREF.login, isIndex: false, title: \"Login\", path: PATHS.login, component: <Home/>, exact:true, onlyGuest:true },\n    { href: HREF.register, isIndex: false, title: \"Register\", path: PATHS.register, component: <Register/>, exact:true, onlyGuest:true },\n    \n]\n\n","import React from 'react';\nimport {  Route as ReactRoute, Redirect, RouteComponentProps } from 'react-router-dom';\nimport * as authGuard from '../../../helpers/authGuard';\n\ninterface ProtectedRouteProps {\n    component: JSX.Element,\n    path: string,\n    isProtected?:boolean; \n    exact?:boolean;\n}\n\nexport class Route extends React.Component<ProtectedRouteProps>{\n    constructor(props:ProtectedRouteProps){\n        super(props)\n    }\n    render(){\n        const { component, isProtected, ...rest } = this.props;\n        if(!!isProtected){\n            return ( <ReactRoute \n                    {...rest}\n                    render={props =>\n                    authGuard.loggedIn() ? (\n                        React.cloneElement(component, props={...props})\n                    ) : (\n                        <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: props.location }\n                        }}\n                        />\n                    )\n                    }\n                />\n                );\n        \n        }else{\n            return (<ReactRoute \n                {...rest}\n                render={props =>React.cloneElement(component, props={...props})}/>\n            );\n        }\n        \n    }\n}\n","import React from \"react\";\nimport { Switch } from \"react-router\";\nimport { routes } from \"../../../app/config/routing\";\nimport { Route } from \"../route/route\";\nexport class Main extends React.Component{\n\n    render(){\n        return (\n            <Switch>\n            <React.Fragment>\n                <div className=\"\" style={{minHeight: \"800px\", backgroundColor: 'var(--white)'}}>\n                    {\n                        routes.map((item, key) => {\n                            const {...rest} = item;\n                           return <Route \n                                {...rest}\n                                key={key}\n                            />\n\n                    })\n                    }\n                </div>\n            </React.Fragment>\n        </Switch>\n        )\n    }\n}","import React from \"react\";\nimport { Switch, withRouter } from \"react-router-dom\";\nimport { Route } from \"../../lib/components/route/route\";\nimport { Header, Footer } from \"../../lib/components\";\nimport { routes } from \"../config/routing\";\nimport * as authGuard from '../../helpers/authGuard';\nimport { Main } from \"../../lib/components/main/main\";\n\nclass Layout extends React.Component {\n    public render() {\n        const HeaderM = withRouter(({ history }) =>\n                    <Header\n                        history={history}\n                        items={\n                            routes.filter(item => item.displayInNavBar !== false)\n                                .map(item => {\n                                    return {\n                                        href: item.href,\n                                        isIndex: item.isIndex,\n                                        title: item.title,\n                                        onlyGuest: item.onlyGuest || false\n                                    };\n                                })\n                        }\n                    />\n                    \n                    )\n        return (\n            <React.Fragment>\n                <HeaderM/>\n                <Main/>\n                <Footer />\n            </React.Fragment>\n        );\n    }\n}\nexport default Layout;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './bootstrap.css';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\nimport Layout from './app/pages/layout';\n\nReactDOM.render((\n    <BrowserRouter>\n        <Layout />\n    </BrowserRouter>\n    ), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}